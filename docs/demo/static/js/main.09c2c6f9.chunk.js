(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{248:function(e){e.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"stop",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"guy",type:"address"},{name:"wad",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"owner_",type:"address"}],name:"setOwner",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"src",type:"address"},{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"guy",type:"address"},{name:"wad",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"wad",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"name_",type:"bytes32"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"src",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"stopped",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"authority_",type:"address"}],name:"setAuthority",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"guy",type:"address"},{name:"wad",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"wad",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"push",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"src",type:"address"},{name:"dst",type:"address"},{name:"wad",type:"uint256"}],name:"move",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"start",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"authority",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"guy",type:"address"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"src",type:"address"},{name:"guy",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"src",type:"address"},{name:"wad",type:"uint256"}],name:"pull",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"symbol_",type:"bytes32"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"guy",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"guy",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"authority",type:"address"}],name:"LogSetAuthority",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"}],name:"LogSetOwner",type:"event"},{anonymous:!0,inputs:[{indexed:!0,name:"sig",type:"bytes4"},{indexed:!0,name:"guy",type:"address"},{indexed:!0,name:"foo",type:"bytes32"},{indexed:!0,name:"bar",type:"bytes32"},{indexed:!1,name:"wad",type:"uint256"},{indexed:!1,name:"fax",type:"bytes"}],name:"LogNote",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!0,name:"guy",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"src",type:"address"},{indexed:!0,name:"dst",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Transfer",type:"event"}]},390:function(e,t,n){e.exports=n.p+"static/media/full-screen-image-3.ef9c8d65.jpg"},395:function(e){e.exports=[{name:"TokenPurchase",inputs:[{type:"address",name:"buyer",indexed:!0},{type:"uint256",name:"eth_sold",indexed:!0},{type:"uint256",name:"tokens_bought",indexed:!0}],anonymous:!1,type:"event"},{name:"EthPurchase",inputs:[{type:"address",name:"buyer",indexed:!0},{type:"uint256",name:"tokens_sold",indexed:!0},{type:"uint256",name:"eth_bought",indexed:!0}],anonymous:!1,type:"event"},{name:"AddLiquidity",inputs:[{type:"address",name:"provider",indexed:!0},{type:"uint256",name:"eth_amount",indexed:!0},{type:"uint256",name:"token_amount",indexed:!0}],anonymous:!1,type:"event"},{name:"RemoveLiquidity",inputs:[{type:"address",name:"provider",indexed:!0},{type:"uint256",name:"eth_amount",indexed:!0},{type:"uint256",name:"token_amount",indexed:!0}],anonymous:!1,type:"event"},{name:"Transfer",inputs:[{type:"address",name:"_from",indexed:!0},{type:"address",name:"_to",indexed:!0},{type:"uint256",name:"_value",indexed:!1}],anonymous:!1,type:"event"},{name:"Approval",inputs:[{type:"address",name:"_owner",indexed:!0},{type:"address",name:"_spender",indexed:!0},{type:"uint256",name:"_value",indexed:!1}],anonymous:!1,type:"event"},{name:"setup",outputs:[],inputs:[{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:175875},{name:"addLiquidity",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"min_liquidity"},{type:"uint256",name:"max_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!0,type:"function",gas:82616},{name:"removeLiquidity",outputs:[{type:"uint256",name:"out"},{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"amount"},{type:"uint256",name:"min_eth"},{type:"uint256",name:"min_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!1,type:"function",gas:116814},{name:"__default__",outputs:[],inputs:[],constant:!1,payable:!0,type:"function"},{name:"ethToTokenSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"min_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!0,type:"function",gas:12757},{name:"ethToTokenTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"min_tokens"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!0,type:"function",gas:12965},{name:"ethToTokenSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"deadline"}],constant:!1,payable:!0,type:"function",gas:50463},{name:"ethToTokenTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!0,type:"function",gas:50671},{name:"tokenToEthSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_eth"},{type:"uint256",name:"deadline"}],constant:!1,payable:!1,type:"function",gas:47503},{name:"tokenToEthTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_eth"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!1,type:"function",gas:47712},{name:"tokenToEthSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_bought"},{type:"uint256",name:"max_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!1,type:"function",gas:50175},{name:"tokenToEthTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_bought"},{type:"uint256",name:"max_tokens"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!1,type:"function",gas:50384},{name:"tokenToTokenSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:51007},{name:"tokenToTokenTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:51098},{name:"tokenToTokenSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:54928},{name:"tokenToTokenTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:55019},{name:"tokenToExchangeSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:49342},{name:"tokenToExchangeTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:49532},{name:"tokenToExchangeSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:53233},{name:"tokenToExchangeTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:53423},{name:"getEthToTokenInputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_sold"}],constant:!0,payable:!1,type:"function",gas:5542},{name:"getEthToTokenOutputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"}],constant:!0,payable:!1,type:"function",gas:6872},{name:"getTokenToEthInputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"}],constant:!0,payable:!1,type:"function",gas:5637},{name:"getTokenToEthOutputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_bought"}],constant:!0,payable:!1,type:"function",gas:6897},{name:"tokenAddress",outputs:[{type:"address",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1413},{name:"factoryAddress",outputs:[{type:"address",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1443},{name:"balanceOf",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"address",name:"_owner"}],constant:!0,payable:!1,type:"function",gas:1645},{name:"transfer",outputs:[{type:"bool",name:"out"}],inputs:[{type:"address",name:"_to"},{type:"uint256",name:"_value"}],constant:!1,payable:!1,type:"function",gas:75034},{name:"transferFrom",outputs:[{type:"bool",name:"out"}],inputs:[{type:"address",name:"_from"},{type:"address",name:"_to"},{type:"uint256",name:"_value"}],constant:!1,payable:!1,type:"function",gas:110907},{name:"approve",outputs:[{type:"bool",name:"out"}],inputs:[{type:"address",name:"_spender"},{type:"uint256",name:"_value"}],constant:!1,payable:!1,type:"function",gas:38769},{name:"allowance",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"address",name:"_owner"},{type:"address",name:"_spender"}],constant:!0,payable:!1,type:"function",gas:1925},{name:"name",outputs:[{type:"bytes32",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1623},{name:"symbol",outputs:[{type:"bytes32",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1653},{name:"decimals",outputs:[{type:"uint256",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1683},{name:"totalSupply",outputs:[{type:"uint256",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1713}]},399:function(e){e.exports={name:"forkfolio-ui",version:"3.1.0",private:!0,homepage:"https://forkfol.io/app",dependencies:{"@uniswap/v3-periphery":"^1.1.0","@walletconnect/web3-provider":"^1.4.1",bluebird:"^3.5.1",bootstrap:"^3.3.7",chartist:"^0.10.1","file-saver":"^1.3.8",highcharts:"^6.1.1","highcharts-react-official":"^1.3.1",history:"^4.7.2",moment:"^2.21.0","node-sass":"^4.6.2","node-sass-chokidar":"^0.0.3",nouislider:"^11.0.3","perfect-scrollbar":"^1.3.0",react:"^16.2.0","react-big-calendar":"^0.19.0","react-bootstrap":"^0.32.1","react-bootstrap-sweetalert":"^4.2.3","react-bootstrap-switch":"^15.5.3","react-chartist":"^0.13.1","react-cookies":"^0.1.0","react-datetime":"2.14.0","react-dom":"^16.2.0","react-ga":"^2.5.3","react-input-files":"^1.0.0","react-jvectormap":"^0.0.2","react-notification-system":"^0.2.17","react-router-dom":"^4.2.2","react-scripts":"^2.0.0","react-select":"^1.2.1","react-share":"^2.3.1","react-stepzilla":"^4.7.0","react-syntax-highlighter":"^7.0.2","react-table":"^6.8.0","react-tagsinput":"^3.19.0",web3:"1.2.9",web3modal:"^1.9.3","whatwg-fetch":"^2.0.4",wnumb:"^1.1.0"},scripts:{"build-css":"node-sass-chokidar --include-path ./src --include-path ./node_modules src/ -o src/","watch-css":"npm run build-css && node-sass-chokidar --include-path ./src --include-path ./node_modules src/ -o src/ --watch --recursive","start-js":"react-scripts start",start:"npm-run-all -p watch-css start-js",build:"npm run build-css && react-scripts build && npm run copy-build",test:"react-scripts test --env=jsdom",eject:"react-scripts eject",serve:"serve -s build","copy-build":"node src/tools/copyBuild.js"},devDependencies:{chalk:"^2.4.1","fs-extra":"^7.0.0","npm-run-all":"^4.1.2"},browserslist:[">0.2%","not dead","not ie <= 11","not op_mini all"]}},400:function(e,t){},401:function(e){e.exports={version:1,transactions:[{isTrade:!1,isBuy:!0,pair:"USD/USD",baseAmount:1e3,counterAmount:0,time:14846076e5,comment:"Live cash"},{isTrade:!1,isBuy:!0,pair:"REP/USD",baseAmount:14,counterAmount:0,time:14846076e5,comment:"null"},{isTrade:!1,isBuy:!0,pair:"ETH/USD",baseAmount:130,counterAmount:0,time:14846076e5,comment:"ICO ether"},{isTrade:!1,isBuy:!0,pair:"BTC/USD",baseAmount:1,counterAmount:0,time:14846076e5,comment:"holding from 2013, mined"},{isTrade:!1,isBuy:!0,pair:"USD/USD",baseAmount:1e3,counterAmount:0,time:14846076e5,comment:"Extra cash"},{isTrade:!1,isBuy:!0,pair:"MAID/USD",baseAmount:692,counterAmount:0,time:14846076e5,comment:"Maid holdings"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:32.5,counterAmount:1387,time:14895324e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:37.96,counterAmount:0,time:14897916e5,comment:"Profit taking"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:8,counterAmount:313,time:1489878e6,comment:"null"},{isTrade:!0,isBuy:!1,pair:"REP/BTC",baseAmount:10.08,counterAmount:.1142,time:14909976e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"BTC/BTC",baseAmount:.0978,counterAmount:0,time:14913432e5,comment:"BCU profit"},{isTrade:!0,isBuy:!0,pair:"ETH/BTC",baseAmount:9.14,counterAmount:.33378,time:14916888e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"REP/BTC",baseAmount:9.1,counterAmount:.1,time:14948856e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/BTC",baseAmount:2.8,counterAmount:.2,time:1495404e6,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/BTC",baseAmount:2.86,counterAmount:.11242,time:1495404e6,comment:"null"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:288,counterAmount:0,time:14956632e5,comment:"profit taking"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:53.1,counterAmount:0,time:1495836e6,comment:"profit taking"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:10,counterAmount:1520,time:1495836e6,comment:"null"},{isTrade:!0,isBuy:!1,pair:"MAID/BTC",baseAmount:692.36,counterAmount:.12648,time:14967e8,comment:"null"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:8.4,counterAmount:2089.82,time:14967864e5,comment:"hedge 2"},{isTrade:!0,isBuy:!0,pair:"BTC/USD",baseAmount:.078,counterAmount:230.46,time:14967864e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"BAT/BTC",baseAmount:2022.9,counterAmount:.2,time:14967864e5,comment:"null"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:22.8,counterAmount:8550,time:14973048e5,comment:"hedge 3"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:12,counterAmount:3048,time:149886e7,comment:"hedge 3 buyback 1/3"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:8,counterAmount:1968,time:14993784e5,comment:"hedge 3 buyback 2/3"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:4601,counterAmount:500,time:14993784e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:100.7,counterAmount:0,time:14996376e5,comment:"profit taking"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:12,counterAmount:199.56,time:1499724e6,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2.8,counterAmount:574,time:1499724e6,comment:"hedge 3 buyback 3/3"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:9.94,counterAmount:2089,time:1499724e6,comment:"hedge 2 buyback"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2,counterAmount:370,time:1499724e6,comment:"null"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:13.2,counterAmount:0,time:14998104e5,comment:"profit taking"},{isTrade:!0,isBuy:!1,pair:"BTC/USD",baseAmount:.47268,counterAmount:986.5,time:14998104e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/ETH",baseAmount:.10800000000000001,counterAmount:0,time:14998104e5,comment:"profit taking"},{isTrade:!0,isBuy:!1,pair:"REP/USD",baseAmount:12,counterAmount:246,time:14998968e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/ETH",baseAmount:.2,counterAmount:0,time:14998968e5,comment:"profit taking"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2,counterAmount:334,time:15000696e5,comment:"null"},{isTrade:!0,isBuy:!1,pair:"USD/USD",baseAmount:65.8,counterAmount:0,time:15000696e5,comment:"profit taking"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:10.46,counterAmount:173,time:1500156e6,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/ETH",baseAmount:.2,counterAmount:0,time:1500156e6,comment:"profit taking"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:4,counterAmount:604,time:1500156e6,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:5.24,counterAmount:1044,time:15002424e5,comment:"null"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:3.58,counterAmount:604,time:15002424e5,comment:"null"},{isTrade:!0,isBuy:!1,pair:"REP/ETH",baseAmount:60,counterAmount:5.48,time:15004152e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"REP/ETH",baseAmount:120.58,counterAmount:10.22,time:15004152e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:116.94,counterAmount:0,time:15011064e5,comment:"profit taking"},{isTrade:!0,isBuy:!0,pair:"BTC/BTC",baseAmount:.0146,counterAmount:0,time:15011064e5,comment:"profit taking"},{isTrade:!0,isBuy:!1,pair:"REP/ETH",baseAmount:47.1,counterAmount:4,time:15012792e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"REP/ETH",baseAmount:24.92,counterAmount:2,time:15015384e5,comment:"null"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:4,counterAmount:880,time:15016248e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"REP/ETH",baseAmount:27.72,counterAmount:2,time:15020568e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"BAT/ETH",baseAmount:14959.32,counterAmount:10,time:1502316e6,comment:"[invest] Init Bat invest"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:987.52,counterAmount:200,time:150318e7,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2,counterAmount:572,time:1504476e6,comment:"null"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:2,counterAmount:636,time:15045624e5,comment:"null"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2,counterAmount:591,time:15048216e5,comment:"null"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:21.712,counterAmount:6274,time:15052536e5,comment:"China ban sell-off #1"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:10,counterAmount:2878,time:15052536e5,comment:"China ban sell-off #2"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:.8,counterAmount:200,time:150534e7,comment:"China ban buy T1"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:.98,counterAmount:219,time:150534e7,comment:"China ban buy T3"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:21.712,counterAmount:6064,time:150534e7,comment:"China ban buyback #1"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:.6,counterAmount:137,time:150534e7,comment:"China ban buy T2"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:10,counterAmount:2511,time:150534e7,comment:"China ban buyback #2"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2.24,counterAmount:474,time:15054264e5,comment:"China ban buy T4"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:4.62,counterAmount:1335,time:1505772e6,comment:"China ban sell T1 + T2 + T3 + T4"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:1.006,counterAmount:260,time:15059448e5,comment:"China ban dip #2"},{isTrade:!0,isBuy:!0,pair:"BAT/ETH",baseAmount:1509,counterAmount:.7494,time:15081048e5,comment:"[trade/open] Step buy in "},{isTrade:!0,isBuy:!0,pair:"BAT/ETH",baseAmount:1205,counterAmount:.5196,time:15103548e5,comment:"[trade/open] Step buy in - part 2"},{isTrade:!0,isBuy:!1,pair:"REP/USD",baseAmount:40,counterAmount:1016,time:1511478e6,comment:"Waiting the dip.."},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:3.84,counterAmount:1506,time:15126012e5,comment:"Crazy btc gains to make money on eth part 1"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:3.84,counterAmount:1660,time:15126876e5,comment:"Crazy btc gains to make money on eth part 2"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:4,counterAmount:1864,time:15129468e5,comment:"Hedge after flatting on 450"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:1.72,counterAmount:840,time:15130332e5,comment:"Hedge after flatting on 450 - step sell 467-510"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:6.04,counterAmount:3050,time:15130332e5,comment:"Arbing1"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:6.04,counterAmount:2899,time:15130332e5,comment:"Arbing1"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:6,counterAmount:3516,time:15131196e5,comment:"$700 GDAX pump"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:5,counterAmount:3070,time:15131196e5,comment:"$700 GDAX pump"},{isTrade:!0,isBuy:!0,pair:"XMR/USD",baseAmount:.131,counterAmount:40,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"GNO/USD",baseAmount:.1378,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"EOS/USD",baseAmount:2.63,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"SALT/USD",baseAmount:2.71,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"MAID/USD",baseAmount:33.98,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"ZEC/USD",baseAmount:.185,counterAmount:80,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"FUN/USD",baseAmount:466.26,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"STORJ/USD",baseAmount:20.26,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"GNT/USD",baseAmount:55.76,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"DOGE/USD",baseAmount:5900,counterAmount:20,time:1513206e6,comment:"Diversify #1"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:9.82,counterAmount:7876,time:1513638e6,comment:"Arbing2 back to eur"},{isTrade:!0,isBuy:!1,pair:"REP/USD",baseAmount:20.15,counterAmount:1666,time:1513638e6,comment:"Rep pump hedge"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:9.82,counterAmount:8176,time:1513638e6,comment:"Arbing2 back to eur"},{isTrade:!0,isBuy:!1,pair:"BAT/USD",baseAmount:4601,counterAmount:1227,time:15138972e5,comment:"Hedge against crash"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:2,counterAmount:1300,time:15139836e5,comment:"Hedge against crash"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:20.14,counterAmount:1342,time:15141564e5,comment:"Rep pump hedge buyback"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:2522.64,counterAmount:1227,time:15148476e5,comment:"[invest] Bat FOMO"},{isTrade:!0,isBuy:!1,pair:"REP/USD",baseAmount:12,counterAmount:1038,time:15151932e5,comment:"[trade/open] Riding the Rep wave"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:14.706,counterAmount:1038,time:15152796e5,comment:"[trade/close] Riding the Rep wave"},{isTrade:!0,isBuy:!1,pair:"REP/USD",baseAmount:24,counterAmount:2286,time:15154524e5,comment:"[trade/open] Step sell rep"},{isTrade:!0,isBuy:!1,pair:"ETH/BTC",baseAmount:4,counterAmount:.3562,time:15155388e5,comment:"[trade/open] Back to grandpa"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:11.464,counterAmount:14628,time:15155388e5,comment:"[trade/open] Eth too high - 15% hedge"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:20.06,counterAmount:0,time:15155388e5,comment:"[trade] Play around"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:24,counterAmount:1973,time:15156252e5,comment:"[trade/close] Step sell rep"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:11.464,counterAmount:12381,time:15160572e5,comment:"[trade/close] Eth too high - 15% hedge"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:4,counterAmount:279,time:15160572e5,comment:"[invest] Blood on the streets REP"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:1900.44,counterAmount:822,time:15160572e5,comment:"[invest] Blood on the streets BAT"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:164.14,counterAmount:0,time:15160572e5,comment:"[trade] Arb - move usdt to eur"},{isTrade:!0,isBuy:!0,pair:"BAT/ETH",baseAmount:486.16,counterAmount:.2026,time:15160572e5,comment:"[trade/open] Blood on the streets BAT moar"},{isTrade:!0,isBuy:!0,pair:"USD/USD",baseAmount:869.44,counterAmount:0,time:15161436e5,comment:"[trade] Blood on the streets #2"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:12,counterAmount:12824,time:15174396e5,comment:"[trade/open] Facebook ads ban"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:12,counterAmount:10784,time:1517526e6,comment:"[trade/close] Facebook ads ban"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:1061.18,counterAmount:400,time:15176988e5,comment:"[invest] Blood on the streets #3 BAT"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:1.56,counterAmount:1e3,time:15178716e5,comment:"[invest] Blood on the streets #3 ETH"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:1337.4,counterAmount:441,time:15178716e5,comment:"[invest] Blood on the streets #3 BAT #2"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:7.992,counterAmount:6287,time:1517958e6,comment:"[trade/open] Blood on the streets #4 ETH"},{isTrade:!0,isBuy:!0,pair:"XLM/USD",baseAmount:478.28,counterAmount:189,time:15182172e5,comment:"[invest] Little bit stellar"},{isTrade:!0,isBuy:!0,pair:"ETH/BTC",baseAmount:4.68,counterAmount:.3556,time:15203772e5,comment:"[trade/close] Back to grandpa"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:1476,counterAmount:483,time:15203772e5,comment:"[invest] MtGox/Binance dip"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:7.992000000000001,counterAmount:5890.88,time:15203772e5,comment:"[trade/close] Blood on the streets #4 ETH"},{isTrade:!0,isBuy:!0,pair:"BAT/ETH",baseAmount:746.4,counterAmount:.2786,time:152055e7,comment:"[trade/open] MtGox/Binance dip"},{isTrade:!0,isBuy:!0,pair:"BAT/USD",baseAmount:1311.28,counterAmount:224,time:15213276e5,comment:"[invest] Everything dip #1"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2.8056,counterAmount:1340,time:15213276e5,comment:"[trade/open] Everything dip #2"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:.944,counterAmount:517,time:15215004e5,comment:"[invest] Everything dip #3"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2,counterAmount:810,time:15222744e5,comment:"[trade/open] Everything dip #4"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:1.7114,counterAmount:640,time:15223608e5,comment:"[trade/open] Step buy (316-292e)"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:2,counterAmount:1136,time:15240888e5,comment:"[trade/close] Everything dip #4"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:1.7114,counterAmount:972,time:15240888e5,comment:"[trade/close] Step buy (316-292e)"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:2.8056,counterAmount:1973,time:15245208e5,comment:"[trade/close] Everything dip #2"},{isTrade:!0,isBuy:!1,pair:"REP/USD",baseAmount:64.71,counterAmount:4109,time:15259032e5,comment:"[trade/open] Binance added Rep"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:77.192,counterAmount:4109,time:15259032e5,comment:"[trade/close] Binance added Rep"},{isTrade:!0,isBuy:!1,pair:"REP/USD",baseAmount:40.0612,counterAmount:2077,time:15268536e5,comment:"[trade/open] Market slowdown "},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:48.8032,counterAmount:2073,time:152694e7,comment:"[trade/close] Market slowdown "},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:1.8944,counterAmount:1030,time:15271128e5,comment:"[invest] Step buy #2 "},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:2.1496,counterAmount:1038,time:15287544e5,comment:"[invest] Step buy #3 (down to 385e) "},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:1.535,counterAmount:655,time:15302232e5,comment:"[trade/o] Step buy #4 (down to 350e)"},{isTrade:!0,isBuy:!0,pair:"REP/USD",baseAmount:25.39,counterAmount:861,time:1530828e6,comment:"[invest] Pre-launch (2 days) Rep"},{isTrade:!0,isBuy:!1,pair:"BAT/ETH",baseAmount:3946.72,counterAmount:2.8864,time:15316056e5,comment:"[trade/c] Coinbase experimenting post - 4 bat dips sellback"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:1.5354,counterAmount:769,time:1531692e6,comment:"[trade/c] Step buy #4 (down to 350e)"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:.899,counterAmount:232.5,time:1534273343001,comment:"[trade/o] Rock bottom"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:10.647,counterAmount:3720,time:1534274931376,comment:"[invest] Step buy (7.20 - 14.8)"},{isTrade:!0,isBuy:!1,pair:"ETH/USD",baseAmount:.899,counterAmount:284,time:1534620531376,comment:"[trade/c] Rock bottom"},{isTrade:!0,isBuy:!0,pair:"ETH/USD",baseAmount:1.56,counterAmount:310,time:1536363539805,comment:"[invest] $198 ether"},{isTrade:!0,isBuy:!1,pair:"BAT/ETH",baseAmount:2e3,counterAmount:1.9391399999999999,time:1539728907502,comment:"[trade/c] Init Bat invest - over 50% profit, lower the risk"},{isTrade:!0,isBuy:!1,pair:"BAT/ETH",baseAmount:2588,counterAmount:3.1408,time:1540149066513,comment:"[trade/c] Init Bat invest - bat doubled"},{isTrade:!0,isBuy:!1,pair:"BAT/ETH",baseAmount:400,counterAmount:.54264,time:1540197835796,comment:"[trade/c] Init Bat Invest - step sell-off"},{isTrade:!0,isBuy:!1,pair:"BAT/ETH",baseAmount:400,counterAmount:.5666,time:1540243328784,comment:"[trade/c] Init Bat Invest - step sell-off #2"},{isTrade:!0,isBuy:!1,pair:"BAT/ETH",baseAmount:1600,counterAmount:2.5056,time:1541191482465,comment:"[trade/c] Init Bat Invest - step selloff"},{isTrade:!1,isBuy:!1,pair:"USD/USD",baseAmount:3e3,counterAmount:0,time:15411996e5,comment:"Live a little"}],changeCount:0}},409:function(e,t,n){e.exports=n(979)},523:function(e,t){},546:function(e,t){},548:function(e,t){},565:function(e,t){},650:function(e,t){},698:function(e,t){},714:function(e,t){},867:function(e,t){},952:function(e,t){},976:function(e,t,n){},977:function(e,t,n){},978:function(e,t,n){},979:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(23),o=n.n(i),s=n(55),l=n(9),u=n(10),c=n(15),m=n(13),d=n(14),p=n(11),h=(n(253),n(386)),f=n.n(h),b=n(2),y=n(389),g=n(390),v=n.n(g),E=n(404),S=n(80),T=n(171),A=n.n(T),k=n(79),w=n.n(k),D=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"+(this.props.hidden?" card-hidden":"")+(this.props.calendar?" card-calendar":"")+(this.props.plain?" card-plain":"")+(this.props.wizard?" card-wizard":"")},void 0!==this.props.title||void 0!==this.props.category?r.a.createElement("div",{className:"header"+(this.props.textCenter?" text-center":"")},r.a.createElement("div",{className:"clearfix"},r.a.createElement("h4",{className:"title"},this.props.title),r.a.createElement("p",{className:"rightsection"},this.props.rightSection)),r.a.createElement("p",{className:"category"},this.props.category),r.a.createElement("div",{className:"clearboth"})):"",r.a.createElement("div",{className:"content"+(this.props.ctAllIcons?" all-icons":"")+(this.props.ctFullWidth?" content-full-width":"")+(this.props.ctTextCenter?" text-center":"")+(this.props.tableFullWidth?" table-full-width":"")},this.props.content),void 0!==this.props.stats||void 0!==this.props.legend?r.a.createElement("div",{className:"footer"+(this.props.ftTextCenter?" text-center":"")},void 0!==this.props.legend?r.a.createElement("div",{className:"legend"},this.props.legend):null,void 0!==this.props.stats?r.a.createElement("hr",null):null,void 0!==this.props.stats?r.a.createElement("div",{className:"stats"},this.props.stats):null):null)}}]),t}(a.Component),C=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"formatNumber",value:function(e,t){return null!=e?e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t}):"0"}},{key:"toShortFormat",value:function(e){var t=e,n="";if(e>1e10?(t=e/1e9,n="B"):e>1e7?(t=e/1e6,n="M"):e>1e4&&(t=e/1e3,n="K"),e<0){var a=C.formatNumber(t,2)+n;return"-$"+a.slice(1,a.length)}return"$"+C.formatNumber(t,2)+n}},{key:"toGreenRedPercentStyle",value:function(e){var t="font-"+(e>=0?"green":"red");return t=Math.abs(e)<.001?"":t,r.a.createElement("div",{className:t},C.formatNumber(e,2)+"%")}},{key:"getNoDataText",value:function(e,t){if(0===t.portfolios.slice(-1)[0].tradeCount)return 0===t.transactions.length?r.a.createElement("span",null,r.a.createElement("p",null,"Your portfolio is empty. To get started:"),r.a.createElement("ol",null,r.a.createElement("li",null,"navigate to the Funding page,"),r.a.createElement("li",null,"click on the Add Funding button,"),r.a.createElement("li",null,"add your first deposit."))):r.a.createElement("span",null,"No ",e," found")}}]),e}()),x=n(406),B=n(4),O=n.n(B),M=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.special,n=e.speciallarge,a=e.table,i=e.fill,o=e.simple,s=e.pullRight,l=e.block,u=e.wd,c=e.round,m=e.icon,d=e.neutral,p=e.twitter,h=e.facebook,f=e.google,y=e.linkedin,g=e.pinterest,v=e.youtube,E=e.tumblr,S=e.github,T=e.behance,A=e.dribbble,k=e.reddit,w=e.stumbleupon,D=Object(x.a)(e,["special","speciallarge","table","fill","simple","pullRight","block","wd","round","icon","neutral","twitter","facebook","google","linkedin","pinterest","youtube","tumblr","github","behance","dribbble","reddit","stumbleupon"]),C=O()({"btn-special":t,"btn-special-large":n,"btn-table":a,"btn-fill":i,"btn-simple":o,"pull-right":s,"btn-block":l,"btn-wd":u,"btn-round":c,"btn-icon":m,"btn-neutral":d,"btn-social btn-twitter":p,"btn-social btn-facebook":h,"btn-social btn-google":f,"btn-social btn-linkedin":y,"btn-social btn-pinterest":g,"btn-social btn-youtube":v,"btn-social btn-tumblr":E,"btn-social btn-github":S,"btn-social btn-behance":T,"btn-social btn-dribbble":A,"btn-social btn-reddit":k,"btn-social btn-stumbleupon":w});return r.a.createElement(b.a,Object.assign({className:C},D))}}]),t}(a.Component);function P(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var j=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).getTradingProfit=n.getTradingProfit.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getTradingProfit",value:function(e){var t,n=0,a=P(e.userModel.transactions);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.isTrade&&(n+=r.getProfit(e.resModel,e.resModel.usd))}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"getTotalFundings",value:function(e){var t,n=0,a=0,r=P(e.userModel.transactions);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!i.isTrade){var o=e.resModel.getPastPrice(i.pair.base,e.resModel.usd,i.time);i.isBuy?n+=i.baseAmount*o:a+=i.baseAmount*o}}}catch(s){r.e(s)}finally{r.f()}return{totalDeposits:n,totalWithdrawals:a}}},{key:"getExposureToCryptoPercentage",value:function(e,t,n){return t.getTotalCryptoBalance(e.resModel,e.resModel.usd)/n*100}},{key:"toShortFormatStyled",value:function(e){e=isNaN(e)?0:e;var t="font-"+((e=Math.abs(e)<1e-4?0:e)>=0?"green":"red");return t=Math.abs(e)<.001?"":t,r.a.createElement("div",{className:t},C.toShortFormat(e))}},{key:"toDecimalFormatStyled",value:function(e,t){return e=isNaN(e)?0:e,e=Math.abs(e)<1e-4?0:e,r.a.createElement("div",null,C.formatNumber(e,2)+t)}},{key:"render",value:function(){var e=this.props.userModel.portfolios.slice(-1)[0],t=e.getTotalBalance(this.props.resModel,this.props.resModel.usd),n=this.getTradingProfit(this.props),a=this.getTotalFundings(this.props),i=t-a.totalDeposits+a.totalWithdrawals,o=i-n,s=this.props.userModel.portfolios.slice(-1)[0].tradeCount,l=this.getExposureToCryptoPercentage(this.props,e,t),u=r.a.createElement(b.q,{id:"edit_tooltip"},"Hodling and trading profits are 2 components of the Total profit you made since you deposited your first currency. ",r.a.createElement("br",null),r.a.createElement("br",null),"Trading profit is profit you made from trading, and includes all your trades. Go to Trades page to see more details on trades. ",r.a.createElement("br",null),r.a.createElement("br",null),"Hodling profit is profit you made by just hodling your currencies, without trading. It's calculated by subtracting trading profit from total profit.");return r.a.createElement(D,{title:this.props.title,category:"All time",rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:u},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help")),content:r.a.createElement("div",null,r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("h5",null,"How do I make profit?"),r.a.createElement("table",{className:"table table-hover"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"by hodling"),r.a.createElement("td",{className:"text-right"},this.toDecimalFormatStyled(o/i*100,"%")),r.a.createElement("td",{className:"text-right"},this.toShortFormatStyled(o))),r.a.createElement("tr",null,r.a.createElement("td",null,"by trading"),r.a.createElement("td",{className:"text-right"},this.toDecimalFormatStyled(n/i*100,"%")),r.a.createElement("td",{className:"text-right"},this.toShortFormatStyled(n))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",{className:"text-right"},this.toShortFormatStyled(i)))))))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("h5",null,"What are my key insights?"),r.a.createElement("table",{className:"table table-hover"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Average profit per trade"),r.a.createElement("td",{className:"text-right"},this.toShortFormatStyled(n/s))),r.a.createElement("tr",null,r.a.createElement("td",null,"Withdrawn"),r.a.createElement("td",{className:"text-right"},C.toShortFormat(a.totalWithdrawals))),r.a.createElement("tr",null,r.a.createElement("td",null,"Exposure to crypto"),r.a.createElement("td",{className:"text-right"},this.toDecimalFormatStyled(l,"%")))))))))})}}]),t}(a.Component),U=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.isHelpPanelShown?r.a.createElement(D,{title:"Getting started",content:r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{lg:5,md:3,sm:0,xs:0},r.a.createElement("p",null,"Welcome to Forkfolio app, a private-by-design crypto portfolio manager you can use to watch live crypto prices, track your trades, and get insights into your trading performance. "),r.a.createElement("p",null,"If you haven't seen Forkfolio in action, visit ",r.a.createElement("a",{href:"https://forkfol.io/demo/"},"demo app")," loaded with public portfolio that showcases all features, or click on a play button to watch a short introductory video."),r.a.createElement("h4",{class:"help-card-title"},"Quick start"),r.a.createElement("p",{class:"help-card-paragraph"},"Your portfolio is like a bank account - first, you need to deposit tokens to your portfolio to be able to trade them for another one. "),r.a.createElement(M,{danger:!0,bsStyle:"danger",fill:!0,wd:!0,onClick:function(){return e.props.showAddFundingDialog()}},"Add Your First Deposit Now")),r.a.createElement(b.b,{lg:7,md:9,sm:12,xs:12},r.a.createElement("iframe",{title:"Getting started with ForkFolio",width:"600",height:"370",src:"https://www.useloom.com/embed/87407d8535bd43b7b5c8a67da8c99d77",frameBorder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowFullScreen:!0}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:2,mdOffset:11},r.a.createElement(M,{bsStyle:"default",fill:!0,onClick:function(){return e.props.hideHelpPanel()}},"Close"))))}):"")}}]),t}(a.Component),F=(n(145),function e(t,n){Object(l.a)(this,e),this.base=t,this.counter=n}),H=function(){function e(t,n,a,r,i,o,s){Object(l.a)(this,e),this.isTrade=t,this.isBuy=n,this.pair=a,this.baseAmount=r,this.counterAmount=i,this.time=o,this.comment=s}return Object(u.a)(e,[{key:"getPrice",value:function(){return this.baseAmount>0?this.counterAmount/this.baseAmount:0}},{key:"getProfit",value:function(e,t){var n=this.getPrice(),a=e.getLastPrice(this.pair.base,this.pair.counter),r=this.baseAmount*(a-n)*(this.isBuy?1:-1);this.pair.counter!==t&&(r*=e.getLastPrice(this.pair.counter,t));return r}},{key:"getProfitPercent",value:function(e){var t=this.getPrice(),n=e.getLastPrice(this.pair.base,this.pair.counter);return 0!==t?(n-t)/t*100*(this.isBuy?1:-1):0}},{key:"toShortString",value:function(){var e="";this.isTrade?(e+=(this.isBuy?"buy":"sell")+" "+C.formatNumber(this.baseAmount,2)+this.pair.base.code+" @ ",e+=C.formatNumber(this.getPrice(),6)+this.pair.counter.code):e+=(this.isBuy?"deposit":"withdrawal")+" "+C.formatNumber(this.baseAmount,2)+this.pair.base.code;return e}}]),e}(),R=n(97),I=n(112),L=n.n(I);function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleTabSelect=n.handleTabSelect.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"isValidAmount",value:function(e){var t=this.isValidNumber(e);return t?this.setState({amountError:null}):this.setState({amountError:r.a.createElement("small",{className:"text-danger"},"Please enter a positive number.")}),t}},{key:"isValidCurrency",value:function(e){var t=null==e;return t?this.setState({currencyError:r.a.createElement("small",{className:"text-danger"},"Please select currency.")}):this.setState({currencyError:null}),!t}},{key:"isValidDate",value:function(e){var t=null==e;return t?this.setState({dateError:r.a.createElement("small",{className:"text-danger"},"Please select date.")}):this.setState({dateError:null}),!t}},{key:"getDepositCurrencies",value:function(){var e,t=[],n=_(this.props.resModel.dailyTickers.keys());try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push({value:a,label:a.code})}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"getWithdrawalCurrencies",value:function(){var e,t=[],n=_(this.props.userModel.portfolios.slice(-1)[0].balances.keys());try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push({value:a,label:a.code})}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"isValidNumber",value:function(e){var t=parseFloat(e);return!isNaN(t)&&t>=0}},{key:"isEnabledDate",value:function(e){return e.isAfter(new Date(2008,11,31))&&e.isBefore(L.a.moment())}},{key:"getBuySellFormGroup",value:function(e,t){var n=this;return this.selected=e,r.a.createElement(b.g,{controlId:"formHorizontalNumber"},r.a.createElement(b.b,{componentClass:b.d,sm:3,smOffset:0},e),r.a.createElement(b.b,{sm:5},r.a.createElement(b.f,{placeholder:t,type:"number",name:"amount",min:0,value:this.state.amount,onChange:function(e){n.setState({amount:e.target.value}),n.isValidAmount(e.target.value)}}),this.state.amountError),r.a.createElement(b.b,{sm:3},r.a.createElement(R.a,{placeholder:"Currency",name:"currency",value:this.state.currency,options:this.state.currencies,onChange:function(e){n.setState({currency:e}),n.isValidCurrency(e)}}),this.state.currencyError))}},{key:"getDateFormGroup",value:function(){var e=this;return r.a.createElement(b.g,{controlId:"formHorizontalNumber"},r.a.createElement(b.b,{componentClass:b.d,sm:3,smOffset:0},"Date"),r.a.createElement(b.b,{sm:5},r.a.createElement(L.a,{isValidDate:this.isEnabledDate,dateFormat:"YYYY-MM-DD",timeFormat:!1,closeOnSelect:!0,inputProps:{placeholder:"Click to select a date"},value:this.state.date,onChange:function(t){e.setState({date:"string"===typeof t?null:t.toDate()}),e.isValidDate("string"===typeof t?null:t.toDate())}}),this.state.dateError))}},{key:"getCommentFormGroup",value:function(){var e=this;return r.a.createElement(b.g,{controlId:"formHorizontalURL"},r.a.createElement(b.b,{componentClass:b.d,sm:3,smOffset:0},"Comment"),r.a.createElement(b.b,{sm:5},r.a.createElement(b.f,{placeholder:"What's going on?",type:"text",name:"comment",value:"null"!==this.state.comment?this.state.comment:"",onChange:function(t){e.setState({comment:t.target.value})}})))}},{key:"handleTabSelect",value:function(e){this.setState({isDeposit:"deposit"===e,currencies:"deposit"===e?this.getDepositCurrencies():this.getWithdrawalCurrencies(),currency:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},r.a.createElement(b.i,{show:this.props.isDialogShown,onHide:function(){return e.props.hideDialog()}},r.a.createElement(b.i.Header,{closeButton:!0},r.a.createElement(b.i.Title,null,this.state.title)),r.a.createElement(b.i.Body,null,r.a.createElement(b.p,{activeKey:this.state.isDeposit?"deposit":"withdrawal",onSelect:this.handleTabSelect,id:"controlled-tab-example"},r.a.createElement(b.o,{eventKey:"deposit",title:"Deposit"},r.a.createElement(b.e,{horizontal:!0},this.getBuySellFormGroup("Deposit","Deposit amount"),this.getDateFormGroup(),this.getCommentFormGroup())),r.a.createElement(b.o,{eventKey:"withdrawal",title:"Withdrawal"},r.a.createElement(b.e,{horizontal:!0},this.getBuySellFormGroup("Withdrawal","Withdrawal amount"),this.getDateFormGroup(),this.getCommentFormGroup())))),r.a.createElement(b.i.Footer,null,r.a.createElement(M,{simple:!0,onClick:function(){return e.props.hideDialog()}},"Cancel"),r.a.createElement(M,{bsStyle:"info",fill:!0,wd:!0,type:"submit",onClick:this.handleSaveButtonClick.bind(this)},this.state.buttonText)))))))}}]),t}(a.Component),V=n(34),z=n.n(V),G=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state=n.getInitialState(e.isInitialDeposit),console.log("Navigate to: "+window.location.pathname+"#/addFunding"),z.a.modalview(window.location.pathname+"#/addFunding"),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"getInitialState",value:function(e){return{title:"Add funding",buttonText:"Add",isDeposit:!0,amount:"",amountError:null,currency:null,currencyError:null,date:new Date,dateError:null,comment:null==e?"":"It's my first deposit",currencies:this.getDepositCurrencies()}}},{key:"handleSaveButtonClick",value:function(){if(console.log("Validating input.."),this.isValidAmount(this.state.amount)&&this.isValidCurrency(this.state.currency)&&this.isValidDate(this.state.date)){console.log("All inputs valid. Saving funding..");var e=new F(this.state.currency.value,this.props.resModel.usd),t=new H(!1,this.state.isDeposit,e,parseFloat(this.state.amount),0,this.state.date,this.state.comment);this.props.addTransaction(t),this.props.hideDialog()}}}]),t}(q),Y=n(173);function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Q=function(){function e(t,n){Object(l.a)(this,e),this.previous=t,this.genesisTx=n,this.balances=new Map,this.tradeCount=this.calculateTradeCount(),this.calculateCurrencyBalances()}return Object(u.a)(e,[{key:"calculateTradeCount",value:function(){var e=null!=this.previous?this.previous.tradeCount:0;return null!=this.genesisTx&&this.genesisTx.isTrade&&e++,e}},{key:"calculateCurrencyBalances",value:function(){if(null!==this.previous&&(this.balances=new Map(this.previous.balances)),null!==this.genesisTx){var e="USD"!==this.genesisTx.pair.counter.code||"USD"===this.genesisTx.pair.counter.code&&this.genesisTx.isTrade;void 0===this.balances.get(this.genesisTx.pair.base)&&this.balances.set(this.genesisTx.pair.base,0),void 0===this.balances.get(this.genesisTx.pair.counter)&&e&&this.balances.set(this.genesisTx.pair.counter,0),this.genesisTx.isBuy?(this.balances.set(this.genesisTx.pair.base,this.balances.get(this.genesisTx.pair.base)+this.genesisTx.baseAmount),e&&this.balances.set(this.genesisTx.pair.counter,this.balances.get(this.genesisTx.pair.counter)-this.genesisTx.counterAmount)):(this.balances.set(this.genesisTx.pair.base,this.balances.get(this.genesisTx.pair.base)-this.genesisTx.baseAmount),e&&this.balances.set(this.genesisTx.pair.counter,this.balances.get(this.genesisTx.pair.counter)+this.genesisTx.counterAmount))}}},{key:"sortBalances",value:function(e){var t=this;this.balances=new Map(Object(Y.a)(this.balances.entries()).sort(function(n,a){return t.getCurrencyBalance(e,a[0],e.usd)-t.getCurrencyBalance(e,n[0],e.usd)}))}},{key:"getCurrencyBalance",value:function(e,t,n){var a=1;if(t!==n){var r=e.getLastPrice(t,n);null!==r&&(a=r)}return this.balances.get(t)*a}},{key:"getTotalBalance",value:function(e,t){var n,a=0,r=X(this.balances.keys());try{for(r.s();!(n=r.n()).done;){var i=n.value;a+=this.getCurrencyBalance(e,i,t)}}catch(o){r.e(o)}finally{r.f()}return a}},{key:"getTotalCryptoBalance",value:function(e,t){var n,a=0,r=X(this.balances.keys());try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isFiat||(a+=this.getCurrencyBalance(e,i,t))}}catch(o){r.e(o)}finally{r.f()}return a}},{key:"getPastCurrencyBalance",value:function(e,t){var n=0;if(null!==this.genesisTx)if(this.genesisTx.time.getTime()<t.getTime())n=this.balances.get(e);else{var a=this.getPastPortfolio(t);null!==a&&null==(n=a.balances.get(e))&&(n=0)}else console.log("Get past balance called for portfolio without genesis trade (first portfolio). Returning 0.");return n}},{key:"getPastTotalBalance",value:function(e,t,n){var a,r=0,i=X(this.balances.keys());try{for(i.s();!(a=i.n()).done;){var o=a.value;r+=e.getPastPrice(o,n,t)*this.getPastCurrencyBalance(o,t)}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"getPastPortfolio",value:function(e){for(var t=this.previous;null!==t;){if(null==t.genesisTx||t.genesisTx.time.getTime()<e.getTime())return t;t=t.previous}return null}}]),e}(),J=n(138),K=n.n(J),Z=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"getDaysSince",value:function(e){return K()(new Date).diff(K()(e),"days")}}]),e}());function ee(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;Object(l.a)(this,e),this.transactions=t,this.positions=n,this.portfolios=[],this.preparePortfolios(a)}return Object(u.a)(e,[{key:"updateTransactions",value:function(e,t){this.transactions=e,this.portfolios=[],this.preparePortfolios(t)}},{key:"preparePortfolios",value:function(e){var t=new Q(null,null);t.sortBalances(e),this.portfolios.push(t);var n,a=t,r=ee(this.transactions);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=new Q(a,i);o.sortBalances(e),this.portfolios.push(o),a=o}}catch(s){r.e(s)}finally{r.f()}}},{key:"getPortfoliosSince",value:function(e){var t,n=[],a=ee(this.portfolios);try{for(a.s();!(t=a.n()).done;){var r=t.value;null!==r.genesisTx&&r.genesisTx.isTrade&&(r.genesisTx.time.getTime()>e.getTime()||r===this.portfolios[this.portfolios.length-1])&&n.push(r)}}catch(i){a.e(i)}finally{a.f()}return n.length>0&&n.unshift(n[0].previous),n}},{key:"getDaysSinceFirstTx",value:function(){if(this.transactions.length>0){var e=new Date(this.transactions[0].time);return Z.getDaysSince(e)}return 0}}]),e}();function ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ie=new(function(){function e(){Object(l.a)(this,e),this.usd=null,this.dailyTickers=new Map,this.recentTickers=new Map}return Object(u.a)(e,[{key:"clone",value:function(){var t=new e;return t.usd=this.usd,t.dailyTickers=this.dailyTickers,t.recentTickers=this.recentTickers,t}},{key:"getLastPrice",value:function(e,t){if(e.code===t.code)return 1;if(t===this.usd){if(null!=this.recentTickers.get(e.code))return this.recentTickers.get(e.code).price;if(null!=this.dailyTickers.get(e).slice(-1)[0])return this.dailyTickers.get(e).slice(-1)[0].price}else{if(null!=this.recentTickers.get(e.code)&&null!=this.recentTickers.get(t))return this.recentTickers.get(e.code).price/this.recentTickers.get(t.code).price;if(null!=this.dailyTickers.get(e).slice(-1)[0]&&null!=this.dailyTickers.get(t).slice(-1)[0])return this.dailyTickers.get(e).slice(-1)[0].price/this.dailyTickers.get(t).slice(-1)[0].price}return 0}},{key:"getPercentChange24h",value:function(e){return null!=this.recentTickers.get(e)?this.recentTickers.get(e).percentChange24h:0}},{key:"sameDay",value:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}},{key:"getPastPrice",value:function(e,t,n){if(e.code===t.code)return 1;if(t===this.usd){var a,r=ae(this.dailyTickers.get(e));try{for(r.s();!(a=r.n()).done;){var i=a.value;if(this.sameDay(n,i.time))return i.price}}catch(o){r.e(o)}finally{r.f()}}return 0}},{key:"findCurrencyByCode",value:function(e){var t,n=ae(this.dailyTickers.keys());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.code===e)return a}}catch(r){n.e(r)}finally{n.f()}return null}}]),e}()),oe=new ne([],ie),se={inputPosition:{align:"left",x:0,y:0},buttonPosition:{align:"right",x:0,y:0},buttons:[{type:"day",count:7,text:"1w",days:7,userFriendlyText:"Last 7 days"},{type:"month",count:1,text:"1m",days:30,userFriendlyText:"Last 30 days"},{type:"month",count:3,text:"3m",days:90,userFriendlyText:"Last 3 months"},{type:"ytd",text:"YTD",days:Z.getDaysSince(new Date((new Date).getFullYear(),0,0)),userFriendlyText:"Year-to-date"},{type:"year",count:1,text:"1y",days:365,userFriendlyText:"Last year"},{type:"all",text:"All",userFriendlyText:"All time"}]};function le(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ce=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).getPerformanceChartOptions=n.getPerformanceChartOptions.bind(Object(p.a)(Object(p.a)(n))),n.getTotalBalance=n.getTotalBalance.bind(Object(p.a)(Object(p.a)(n))),n.getTableColumnsDesktop=n.getTableColumnsDesktop.bind(Object(p.a)(Object(p.a)(n))),n.getTableColumnsMobile=n.getTableColumnsMobile.bind(Object(p.a)(Object(p.a)(n))),n.getTableData=n.getTableData.bind(Object(p.a)(Object(p.a)(n))),n.getLogoURL=n.getLogoURL.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){console.log("Navigate to: "+window.location.pathname+window.location.hash),z.a.pageview(window.location.pathname+window.location.hash)}},{key:"updateWidth",value:function(){this.setState({width:window.innerWidth})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWidth.bind(this))}},{key:"getTotalBalance",value:function(e){var t,n=0,a=le(e.data);try{for(a.s();!(t=a.n()).done;){n+=t.value.total[0]}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"downsizeTokenLogo",value:function(e){return e.replace("64x64","32x32")}},{key:"getTableColumnsDesktop",value:function(){var e=this;return[{Header:"Name",accessor:"name",maxWidth:180,Cell:function(t){return r.a.createElement("span",null,r.a.createElement("img",{src:e.downsizeTokenLogo(t.value[0]),alt:""})," ",t.value[1])}},{Header:"Price",accessor:"price",maxWidth:120,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},"$"+C.formatNumber(e.value[0],4))},sortMethod:function(e,t){return t-e}},{Header:"24h",accessor:"percentChange24h",maxWidth:80,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.toGreenRedPercentStyle(e.value))},sortMethod:function(e,t){return t-e}},{Header:"Balance",accessor:"balance",maxWidth:160,sortable:!1,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.formatNumber(e.value[0],2)+" "+e.value[1])}},{Header:"Share",accessor:"share",maxWidth:80,Footer:r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,"100%")," "),Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.formatNumber(e.value,2)+"%")},sortMethod:function(e,t){return t-e}},{Header:"Total",accessor:"total",minWidth:120,maxWidth:140,Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,"$"+C.formatNumber(e.getTotalBalance(t),2)))},Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},"$"+C.formatNumber(e.value[0],2))},sortMethod:function(e,t){return t-e}}]}},{key:"getTableColumnsMobile",value:function(){var e=this;return[{Header:"Name",accessor:"code",maxWidth:100,Cell:function(t){return r.a.createElement("span",null,r.a.createElement("img",{src:e.downsizeTokenLogo(t.value[0]),alt:""})," ",t.value[1])}},{Header:"Price",accessor:"price",maxWidth:100,Cell:function(e){return r.a.createElement("div",null,r.a.createElement("span",{style:{float:"right"}},"$"+C.formatNumber(e.value[0],4)),r.a.createElement("br",null),r.a.createElement("span",{style:{float:"right"}},C.toGreenRedPercentStyle(e.value[1])))},sortMethod:function(e,t){return t-e}},{Header:"Balance",accessor:"total",minWidth:120,maxWidth:140,Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,"$"+C.formatNumber(e.getTotalBalance(t),2)))},Cell:function(e){return r.a.createElement("div",null,r.a.createElement("span",{style:{float:"right"}},"$"+C.formatNumber(e.value[0],2)),r.a.createElement("br",null),r.a.createElement("span",{style:{float:"right"}},C.toShortFormat(e.value[1][0],2).substr(1)))},sortMethod:function(e,t){return t-e}}]}},{key:"getLogoURL",value:function(e){return null==e.meta?"fiat-logos/"+(e.isFiat?e.code.toLowerCase():"empty")+".png":e.meta.logo}},{key:"getTableData",value:function(e){var t,n=e.userModel.portfolios.slice(-1)[0],a=n.getTotalBalance(e.resModel,e.resModel.usd),r=[],i=le(n.balances);try{for(i.s();!(t=i.n()).done;){var o=t.value,s=Object(E.a)(o,2),l=s[0],u=s[1],c=n.getCurrencyBalance(e.resModel,l,e.resModel.usd),m=[this.getLogoURL(l),l.name],d=[this.getLogoURL(l),l.code],p=e.resModel.getPercentChange24h(l.code),h=[e.resModel.getLastPrice(l,e.resModel.usd),p],f=[u,l.code],b=c/a*100,y=[c,f];r.push({id:r.length,name:m,code:d,price:h,percentChange24h:p,balance:f,share:b,total:y})}}catch(g){i.e(g)}finally{i.f()}return r}},{key:"getPerformanceChartOptions",value:function(e){var t,n=e.userModel.portfolios.slice(-1)[0],a=[],r=le(n.balances.keys());try{for(r.s();!(t=r.n()).done;){var i,o=t.value,s=[],l=le(e.resModel.dailyTickers.get(o));try{for(l.s();!(i=l.n()).done;){var u=i.value,c=u.price*n.getPastCurrencyBalance(u.pair.base,u.time);s.push([u.time.getTime(),c])}}catch(m){l.e(m)}finally{l.f()}null!=s.slice(-1)[0]&&(s.slice(-1)[0][1]=n.getCurrencyBalance(e.resModel,o,e.resModel.usd),a.push({name:o.code,data:s}))}}catch(m){r.e(m)}finally{r.f()}return{chart:{type:"area"},title:{text:null},plotOptions:{series:{stacking:"normal",lineColor:"#666666",lineWidth:1,marker:{lineWidth:1,lineColor:"#666666"}}},series:a,rangeSelector:se,tooltip:{shared:!0,valueSuffix:" USD",valueDecimals:2},credits:{enabled:!1}}}},{key:"render",value:function(){var e=this.props.userModel.portfolios.slice(-1)[0].balances.size,t=e>10,n=window.innerWidth<=992,a=r.a.createElement(G,{isDialogShown:this.props.isAddFundingDialogShown,hideDialog:this.props.hideAddFundingDialog,addTransaction:this.props.addTransaction,userModel:this.props.userModel,resModel:this.props.resModel,isInitialDeposit:!0}),i=r.a.createElement(b.q,{id:"edit_tooltip"},"Balance sheet panel displays all crypto and fiat currencies (coins) you own at this moment. This is your portfolio. You can check live prices of your currencies, total balance of a currency in USD, and the total value in USD at the bottom. ",r.a.createElement("br",null),r.a.createElement("br",null),"24H column displays a change in USD price in the last 24 hours."),o=r.a.createElement(b.q,{id:"edit_tooltip"},"Portfolio history panel displays a chart of daily historical snapshots of your portfolio. All changes to your portfolio are taken into account: trades, deposits and withdrawals.",r.a.createElement("br",null),r.a.createElement("br",null),"Easily zoom in/out with predefined time periods, or use the slider on the bottom to fine tune.");return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(U,{isHelpPanelShown:this.props.isHelpPanelShown,hideHelpPanel:this.props.hideHelpPanel,showAddFundingDialog:this.props.showAddFundingDialog}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:8},r.a.createElement(D,{title:"What's my balance sheet today?",category:e+" asset"+(1===e?"":"s"),rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:i},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help")),content:r.a.createElement(S.a,{className:"-highlight",data:this.getTableData(this.props),columns:n?this.getTableColumnsMobile(this.props):this.getTableColumnsDesktop(this.props),defaultPageSize:10,showPageSizeOptions:!1,showPagination:t,noDataText:C.getNoDataText("assets",this.props.userModel)})})),r.a.createElement(b.b,{md:4},r.a.createElement(j,{title:"Portfolio insights",portfolio:this.props.userModel.portfolios.slice(-1)[0],resModel:this.props.resModel,userModel:this.props.userModel}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(D,{title:"What's my portfolio history?",rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:o},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help")),content:r.a.createElement(w.a,{highcharts:A.a,constructorType:"stockChart",options:this.getPerformanceChartOptions(this.props)})}),this.props.isAddFundingDialogShown?a:""))))}}]),t}(a.Component);function me(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var pe=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"isValidBuyAmount",value:function(e){var t=this.isValidNumber(e);return t?this.setState({buyAmountError:null}):this.setState({buyAmountError:r.a.createElement("small",{className:"text-danger"},"Please enter a positive number.")}),t}},{key:"isValidBuyCurrency",value:function(e){var t=null==e;return t?this.setState({buyCurrencyError:r.a.createElement("small",{className:"text-danger"},"Please select a currency.")}):this.setState({buyCurrencyError:null}),!t}},{key:"isValidSellAmount",value:function(e){var t=this.isValidNumber(e);return t?this.setState({sellAmountError:null}):this.setState({sellAmountError:r.a.createElement("small",{className:"text-danger"},"Please enter a positive number.")}),t}},{key:"isValidSellCurrency",value:function(e){var t=null==e;return t?this.setState({sellCurrencyError:r.a.createElement("small",{className:"text-danger"},"Please select a currency.")}):this.setState({sellCurrencyError:null}),!t}},{key:"isValidDate",value:function(e){var t=null==e;return t?this.setState({dateError:r.a.createElement("small",{className:"text-danger"},"Please select date.")}):this.setState({dateError:null}),!t}},{key:"getBuyCurrencies",value:function(e){var t,n=[],a=me(e.resModel.dailyTickers.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({value:r,label:r.code})}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"getSellCurrencies",value:function(e){var t,n=[],a=me(e.userModel.portfolios.slice(-1)[0].balances.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({value:r,label:r.code})}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"isValidNumber",value:function(e){var t=parseFloat(e);return!isNaN(t)&&t>=0}},{key:"isEnabledDate",value:function(e){return e.isAfter(new Date(2008,11,31))&&e.isBefore(L.a.moment())}},{key:"getBuyFormGroup",value:function(e,t){var n=this;return r.a.createElement(b.g,{controlId:"formHorizontalNumber"},r.a.createElement(b.b,{componentClass:b.d,sm:3,smOffset:0},e),r.a.createElement(b.b,{sm:5},r.a.createElement(b.f,{placeholder:t,type:"number",min:0,name:"buyAmount",value:this.state.buyAmount,onChange:function(e){n.setState({buyAmount:e.target.value}),n.isValidBuyAmount(e.target.value)}}),this.state.buyAmountError),r.a.createElement(b.b,{sm:3},r.a.createElement(R.a,{placeholder:"Currency",name:"buyCurrency",value:this.state.buyCurrency,options:this.state.buyCurrencies,onChange:function(e){n.setState({buyCurrency:e}),n.isValidBuyCurrency(e)}}),this.state.buyCurrencyError))}},{key:"getSellFormGroup",value:function(e,t){var n=this;return r.a.createElement(b.g,{controlId:"formHorizontalNumber"},r.a.createElement(b.b,{componentClass:b.d,sm:3,smOffset:0},e),r.a.createElement(b.b,{sm:5},r.a.createElement(b.f,{placeholder:t,type:"number",name:"sellAmount",min:0,value:this.state.sellAmount,onChange:function(e){n.setState({sellAmount:e.target.value}),n.isValidSellAmount(e.target.value)}}),this.state.sellAmountError),r.a.createElement(b.b,{sm:3},r.a.createElement(R.a,{placeholder:"Currency",name:"sellCurrency",value:this.state.sellCurrency,options:this.state.sellCurrencies,onChange:function(e){n.setState({sellCurrency:e}),n.isValidSellCurrency(e)}}),this.state.sellCurrencyError))}},{key:"getDateFormGroup",value:function(){var e=this;return r.a.createElement(b.g,{controlId:"formHorizontalNumber"},r.a.createElement(b.b,{componentClass:b.d,sm:3,smOffset:0},"Date"),r.a.createElement(b.b,{sm:5},r.a.createElement(L.a,{isValidDate:this.isEnabledDate,dateFormat:"YYYY-MM-DD",timeFormat:!1,closeOnSelect:!0,inputProps:{placeholder:"Click to select a date"},value:this.state.date,onChange:function(t){e.setState({date:"string"===typeof t?null:t.toDate()}),e.isValidDate("string"===typeof t?null:t.toDate())}}),this.state.dateError))}},{key:"getCommentFormGroup",value:function(){var e=this;return r.a.createElement(b.g,{controlId:"formHorizontalURL"},r.a.createElement(b.b,{componentClass:b.d,sm:3,smOffset:0},"Comment"),r.a.createElement(b.b,{sm:5},r.a.createElement(b.f,{placeholder:"What's going on?",type:"text",name:"comment",value:"null"!==this.state.comment?this.state.comment:"",onChange:function(t){e.setState({comment:t.target.value})}})))}},{key:"render",value:function(){var e=this,t="buy";return null==this.props.editedTransaction||this.props.editedTransaction.isBuy||(t="sell"),r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},r.a.createElement(b.i,{show:this.props.isDialogShown,onHide:function(){return e.props.hideDialog()}},r.a.createElement(b.i.Header,{closeButton:!0},r.a.createElement(b.i.Title,null,this.state.title)),r.a.createElement(b.i.Body,null,r.a.createElement(b.o.Container,{id:"tabs-with-dropdown",defaultActiveKey:t},r.a.createElement(b.n,{className:"clearfix"},r.a.createElement(b.b,{sm:12},r.a.createElement(b.j,{bsStyle:"tabs"},r.a.createElement(b.k,{eventKey:"buy"},"Buy"),r.a.createElement(b.k,{eventKey:"sell"},"Sell"))),r.a.createElement(b.b,{sm:12},r.a.createElement(b.o.Content,{animation:!0},r.a.createElement(b.o.Pane,{eventKey:"buy"},r.a.createElement(b.e,{horizontal:!0},this.getBuyFormGroup("Buy amount","How much to buy?"),this.getSellFormGroup("Cost","How much is cost?"),this.getDateFormGroup(),this.getCommentFormGroup())),r.a.createElement(b.o.Pane,{eventKey:"sell"},r.a.createElement(b.e,{horizontal:!0},this.getSellFormGroup("Sell amount","How much to sell?"),this.getBuyFormGroup("Proceeds","How much to receive?"),this.getDateFormGroup(),this.getCommentFormGroup()))))))),r.a.createElement(b.i.Footer,null,r.a.createElement(M,{simple:!0,onClick:function(){return e.props.hideDialog()}},"Cancel"),r.a.createElement(M,{bsStyle:"info",fill:!0,wd:!0,type:"submit",onClick:this.handleSaveButtonClick.bind(this)},this.state.buttonText)))))))}}]),t}(a.Component),he=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state=n.getInitialState(e),console.log("Navigate to: "+window.location.pathname+"#/addTrade"),z.a.modalview(window.location.pathname+"#/addTrade"),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"getInitialState",value:function(e){return{isDialogShown:e.isDialogShown,title:"Add trade",buttonText:"Add",buyAmount:"",buyAmountError:null,buyCurrency:null,buyCurrencyError:null,sellAmount:"",sellAmountError:null,sellCurrency:null,sellCurrencyError:null,date:new Date,dateError:null,comment:"",buyCurrencies:this.getBuyCurrencies(e),sellCurrencies:this.getSellCurrencies(e)}}},{key:"getPair",value:function(e,t,n,a){var r=e.rank+(e.isFiat?-1e6:0),i=t.rank+(t.isFiat?-1e6:0);return r<i||r===i&&0===n?{pair:new F(t,e),isBuy:!1,buyAmount:a,sellAmount:n}:{pair:new F(e,t),isBuy:!0,buyAmount:n,sellAmount:a}}},{key:"handleSaveButtonClick",value:function(){if(console.log("Validating input.."),this.isValidBuyAmount(this.state.buyAmount)&&this.isValidBuyCurrency(this.state.buyCurrency)&&this.isValidSellAmount(this.state.sellAmount)&&this.isValidSellCurrency(this.state.sellCurrency)&&this.isValidDate(this.state.date)){console.log("All inputs valid. Saving trade..");var e=this.getPair(this.state.buyCurrency.value,this.state.sellCurrency.value,parseFloat(this.state.buyAmount),parseFloat(this.state.sellAmount)),t=e.pair,n=e.isBuy,a=e.buyAmount,r=e.sellAmount,i=new H(!0,n,t,a,r,this.state.date,this.state.comment);this.props.addTransaction(i),this.setState(this.getInitialState(this.props)),this.props.hideDialog()}}}]),t}(pe),fe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={title:"Update trade",buttonText:"Update",editedTransaction:e.editedTransaction,buyAmount:e.editedTransaction.baseAmount.toString(),buyAmountError:null,buyCurrency:n.getSelectObject(e.editedTransaction.pair.base),buyCurrencyError:null,buyCurrencies:n.getBuyCurrencies(e),sellAmount:e.editedTransaction.counterAmount.toString(),sellAmountError:null,sellCurrency:n.getSelectObject(e.editedTransaction.pair.counter),sellCurrencyError:null,sellCurrencies:n.getSellCurrencies(e),date:e.editedTransaction.time,dateError:null,comment:e.editedTransaction.comment},console.log("Navigate to: "+window.location.pathname+"#/editTrade"),z.a.modalview(window.location.pathname+"#/editTrade"),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"getSelectObject",value:function(e){return{value:e,label:e.code}}},{key:"handleSaveButtonClick",value:function(){if(console.log("Validating input.."),this.isValidBuyAmount(this.state.buyAmount)&&this.isValidBuyCurrency(this.state.buyCurrency)&&this.isValidSellAmount(this.state.sellAmount)&&this.isValidSellCurrency(this.state.sellCurrency)&&this.isValidDate(this.state.date)){console.log("All inputs valid. Saving trade..");var e=new F(this.state.buyCurrency.value,this.state.sellCurrency.value),t=new H(!0,this.state.editedTransaction.isBuy,e,parseFloat(this.state.buyAmount),parseFloat(this.state.sellAmount),this.state.date,this.state.comment);this.props.updateTransaction(t),this.props.hideDialog()}}}]),t}(pe),be=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getType",value:function(){if(null!=this.props.removedTransaction)return this.props.removedTransaction.isTrade?"trade":"funding"}},{key:"getDescription",value:function(){if(null!=this.props.removedTransaction)return(this.props.removedTransaction.isTrade?"Trade":"Funding")+": "+this.props.removedTransaction.toShortString()}},{key:"getDate",value:function(){if(null!=this.props.removedTransaction)return"Date: "+this.props.removedTransaction.time.toISOString().split("T")[0]}},{key:"getComment",value:function(){if(null!=this.props.removedTransaction)return"Comment: "+this.props.removedTransaction.comment}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},r.a.createElement(b.i,{show:this.props.isDialogShown,onHide:function(){return e.props.hideDialog()}},r.a.createElement(b.i.Header,{closeButton:!0},r.a.createElement(b.i.Title,null,"Confirm remove")),r.a.createElement(b.i.Body,null,r.a.createElement("p",null,"Are you sure you want to remove this ",this.getType(),"?"),r.a.createElement("br",null),r.a.createElement("p",null,this.getDescription()),r.a.createElement("p",null,this.getDate()),r.a.createElement("p",null,this.getComment())),r.a.createElement(b.i.Footer,null,r.a.createElement(M,{simple:!0,onClick:function(){return e.props.hideDialog()}},"Cancel"),r.a.createElement(M,{bsStyle:"default",fill:!0,wd:!0,type:"submit",onClick:function(){return e.props.removeTransaction()}},"Remove")))))))}}]),t}(a.Component);function ye(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ve=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).hideConfirmDialog=n.hideConfirmDialog.bind(Object(p.a)(Object(p.a)(n))),n.removeTransaction=n.removeTransaction.bind(Object(p.a)(Object(p.a)(n))),n.state={data:n.mapTradesToState(e),isConfirmDialogShown:!1,removedTransaction:null},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){console.log("Navigate to: "+window.location.pathname+window.location.hash),z.a.pageview(window.location.pathname+window.location.hash)}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:this.mapTradesToState(e)})}},{key:"mapTradesToState",value:function(e){var t=this,n=[],a=e.userModel.transactions.slice(0,e.userModel.transactions.length);a.sort(function(e,t){return t.time.getTime()-e.time.getTime()});var i,o=ye(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.isTrade){var l=s.time.toISOString().split("T")[0],u=s.pair.base.code+"/"+s.pair.counter.code,c=s.isBuy?"Buy":"Sell",m="null"===s.comment?"":s.comment,d=[s.baseAmount,s.pair.base.code],p=[s.getPrice(),s.pair.counter.code],h=[s.counterAmount,s.pair.counter.code],f=s.getProfitPercent(e.resModel),b=[s.getProfit(e.resModel,e.resModel.usd),e.resModel.usd.code];n.push([s,l,u,c,m,d,p,h,f,b])}}}catch(y){o.e(y)}finally{o.f()}return n.map(function(e,n){return{id:e[0],date:e[1],pair:e[2],type:e[3],comment:e[4],volume:e[5],price:e[6],cost:e[7],profitpercentage:e[8],profit:e[9],actions:r.a.createElement("div",{className:"actions-right"},r.a.createElement(M,{onClick:function(){return t.props.setEditedTransaction(t.state.data[n].id),t.props.showEditTradeDialog(),!0},bsStyle:"default",table:!0,simple:!0,icon:!0},r.a.createElement("i",{className:"fa fa-edit"}))," ",r.a.createElement(M,{onClick:function(){return t.setState({isConfirmDialogShown:!0,removedTransaction:t.state.data[n].id}),!0},bsStyle:"danger",table:!0,simple:!0,icon:!0},r.a.createElement("i",{className:"fa fa-times"}))," ")}})}},{key:"getTotalVolume",value:function(e){var t,n=0,a=ye(e.data);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=r.volume[0]*("Buy"===r.type?1:-1)}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"getTotalPrice",value:function(e){return this.getTotalCost(e)/this.getTotalVolume(e)}},{key:"getTotalCost",value:function(e){var t,n=0,a=ye(e.data);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=r.cost[0]*("Buy"===r.type?1:-1)}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"getTotalProfitPercentage",value:function(e){var t=e.data[0].pair.split("/"),n=this.props.resModel.findCurrencyByCode(t[0]),a=this.props.resModel.findCurrencyByCode(t[1]);if(null!==n&&null!==a){var r=this.getTotalCost(e)*this.props.resModel.getLastPrice(a,this.props.resModel.usd),i=this.getTotalProfit(e);return r*="Buy"===this.getTypeFooter(e)?1:-1,i/Math.max(0,r)*100}return 0}},{key:"getTotalProfit",value:function(e){var t,n=0,a=ye(e.data);try{for(a.s();!(t=a.n()).done;){n+=t.value.profit[0]}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"isOnePair",value:function(e){var t,n=ye(e.data);try{for(n.s();!(t=n.n()).done;){if(t.value.pair!==e.data[0].pair)return!1}}catch(a){n.e(a)}finally{n.f()}return 0!==e.data.length}},{key:"getPairFooter",value:function(e){return this.isOnePair(e)?e.data[0].pair:""}},{key:"getTypeFooter",value:function(e){return this.isOnePair(e)?this.getTotalVolume(e)>=0?"Buy":"Sell":""}},{key:"getVolumeFooter",value:function(e){return this.isOnePair(e)?C.formatNumber(Math.abs(this.getTotalVolume(e)),2)+" "+e.data[0].volume[1]:""}},{key:"getPriceFooter",value:function(e){return this.isOnePair(e)?C.formatNumber(this.getTotalPrice(e),6)+" "+e.data[0].cost[1]:""}},{key:"getCostFooter",value:function(e){if(this.isOnePair(e)){var t="Buy"===this.getTypeFooter(e);return C.formatNumber(this.getTotalCost(e)*(t?1:-1),2)+" "+e.data[0].cost[1]}return""}},{key:"getProfitPercentageFooter",value:function(e){return this.isOnePair(e)?C.formatNumber(this.getTotalProfitPercentage(e),2)+"%":""}},{key:"getTableColumns",value:function(){var e=this;return[{Header:"Date",accessor:"date",minWidth:95,maxWidth:100,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())}},{Header:"Pair",accessor:"pair",maxWidth:100,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())},Footer:function(t){return r.a.createElement("span",null,r.a.createElement("strong",null,e.getPairFooter(t)))}},{Header:"Type",accessor:"type",maxWidth:50,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())},Footer:function(t){return r.a.createElement("span",null,r.a.createElement("strong",null,e.getTypeFooter(t)))}},{Header:"Comment",accessor:"comment",maxWidth:300,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())}},{Header:"Volume",accessor:"volume",maxWidth:140,filterable:!1,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.formatNumber(e.value[0],2)+" "+e.value[1])},sortMethod:function(e,t){return t[0]-e[0]},Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,e.getVolumeFooter(t)))}},{Header:"Price",accessor:"price",maxWidth:160,filterable:!1,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.formatNumber(e.value[0],6)+" "+e.value[1])},sortMethod:function(e,t){return t[0]-e[0]},Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,e.getPriceFooter(t)))}},{Header:"Cost",accessor:"cost",maxWidth:140,filterable:!1,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.formatNumber(e.value[0],2)+" "+e.value[1])},sortMethod:function(e,t){return t[0]-e[0]},Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,e.getCostFooter(t)))}},{Header:"Profit [%]",accessor:"profitpercentage",maxWidth:80,filterable:!1,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.toGreenRedPercentStyle(e.value))},sortMethod:function(e,t){return t-e},Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,e.getProfitPercentageFooter(t)))}},{Header:"Profit",accessor:"profit",maxWidth:160,filterable:!1,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.formatNumber(e.value[0],2)+" "+e.value[1])},sortMethod:function(e,t){return t[0]-e[0]},Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,C.formatNumber(e.getTotalProfit(t),2)+" USD"))}},{Header:"Actions",accessor:"actions",minWidth:70,maxWidth:70,sortable:!1,filterable:!1}]}},{key:"hideConfirmDialog",value:function(){this.setState({isConfirmDialogShown:!1})}},{key:"removeTransaction",value:function(){this.props.removeTransaction(this.state.removedTransaction),this.hideConfirmDialog()}},{key:"render",value:function(){var e=this,t=this.props.userModel.portfolios.slice(-1)[0].tradeCount,n=r.a.createElement(he,{isDialogShown:this.props.isAddTradeDialogShown,hideDialog:this.props.hideAddTradeDialog,addTransaction:this.props.addTransaction,userModel:this.props.userModel,resModel:this.props.resModel}),a=r.a.createElement(fe,{isDialogShown:this.props.isEditTradeDialogShown,hideDialog:this.props.hideEditTradeDialog,editedTransaction:this.props.editedTransaction,updateTransaction:this.props.updateTransaction,userModel:this.props.userModel,resModel:this.props.resModel}),i=r.a.createElement(be,{isDialogShown:this.state.isConfirmDialogShown,hideDialog:this.hideConfirmDialog,removedTransaction:this.state.removedTransaction,removeTransaction:this.removeTransaction}),o=r.a.createElement(b.q,{id:"edit_tooltip"},"Trades panel displays all your trades. A trade is when you exchange one currency for another. ",r.a.createElement("br",null),r.a.createElement("br",null),"To add a trade, click on the Add trade button. To edit or remove a trade, click on the edit/remove icon found in ACTIONS column.",r.a.createElement("br",null),r.a.createElement("br",null),"PROFIT column will give you a trade's profit in USD for prices right now. There's also a total profit for all trades on the bottom. ",r.a.createElement("br",null),r.a.createElement("br",null),"Trades can be sorted, and filtered in multiple ways. For example, to show all ETH/USD trades in 2018, enter ETH/USD in the PAIR filter, and 2018 in the DATE filter.");return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(D,{title:"What are my recent trades?",rightSection:r.a.createElement("div",null,r.a.createElement(M,{bsStyle:"info",fill:!0,special:!0,onClick:function(){return e.props.showAddTradeDialog()}},r.a.createElement("i",{className:"fa fa-plus"})," Add trade"),r.a.createElement(b.m,{placement:"bottom",overlay:o},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help"))),category:t+" trade"+(1===t?"":"s"),content:r.a.createElement(S.a,{className:"-highlight",data:this.state.data,filterable:!0,columns:this.getTableColumns(),defaultPageSize:10,noDataText:C.getNoDataText("trades",this.props.userModel)})}),this.props.isAddTradeDialogShown?n:"",this.props.isEditTradeDialogShown?a:"",this.state.isConfirmDialogShown?i:""))))}}]),t}(a.Component),Ee=n(17),Se=n.n(Ee),Te=n(31),Ae=n(392),ke=n.n(Ae),we=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"getTokenPriceInUSD",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t){var n,a,r;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses="+t.toLowerCase()+"&vs_currencies=USD",e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent)[t.toLowerCase()]){e.next=9;break}return e.abrupt("return",Number(r[t.toLowerCase()].usd));case 9:return e.abrupt("return",1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),De=n(395),Ce=n(248),xe="0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48";function Be(e,t,n){return new e.eth.Contract(t,n)}function Oe(e,t,n,a){return[n-(t-a)/e,t]}function Me(e,t,n,a){return[t,a-(t-n)*e]}function Pe(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}var Ne=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"blackScholes",value:function(e,t,n,a,r,i){var o=(Math.log(t/n)+(r+i*i/2)*a)/(i*Math.sqrt(a)),s=o-i*Math.sqrt(a);return"call"===e?t*this.CND(o)-n*Math.exp(-r*a)*this.CND(s):n*Math.exp(-r*a)*this.CND(-s)-t*this.CND(-o)}},{key:"CND",value:function(e){if(e<0)return 1-this.CND(-e);var t=1/(1+.2316419*e);return 1-Math.exp(-e*e/2)/Math.sqrt(2*Math.PI)*t*(.31938153+t*(t*(1.781477937+t*(1.330274429*t-1.821255978))-.356563782))}}]),e}(),je=function(){function e(t,n,a,r,i){Object(l.a)(this,e),this.marketAddress=t,this.addressBASE=n,this.addressUNDER=a,this.feeInPercent=.3,this.myBASE=0,this.myUNDER=0,this.myLIQ=r,this.poolBASE=0,this.poolUNDER=0,this.poolLIQ=0,this.k=this.poolBASE*this.poolUNDER,this.apr=i}return Object(u.a)(e,[{key:"getMarketData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){var a,r,i,o,s,l,u;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Be(t,De,this.marketAddress),r=Be(t,Ce,this.addressBASE),i=Be(t,Ce,this.addressUNDER),e.next=5,t.eth.getBalance(this.marketAddress);case 5:return o=e.sent,e.next=8,a.methods.totalSupply().call();case 8:return s=e.sent,e.next=11,r.methods.balanceOf(this.marketAddress).call();case 11:return l=e.sent,e.next=14,i.methods.balanceOf(this.marketAddress).call();case 14:return(u=e.sent)/Math.pow(10,18)===0&&o/Math.pow(10,18)>0&&(u=o),this.poolUNDER=u/Math.pow(10,this.getDecimals(this.addressUNDER)),this.poolLIQ=s/Math.pow(10,18),this.poolBASE=l/(this.addressBASE!==xe?Math.pow(10,18):Math.pow(10,6)),this.k=this.poolUNDER*this.poolBASE,e.next=22,we.getTokenPriceInUSD(this.addressBASE);case 22:return this.priceBASEUSD=e.sent,e.next=25,we.getTokenPriceInUSD(this.addressUNDER);case 25:this.priceUNDERUSD=e.sent,console.log("AMM market data loaded. "+n.base.symbol+": "+this.priceBASEUSD+" USD, "+n.under.symbol+": "+this.priceUNDERUSD+" USD");case 27:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){}},{key:"getCurrentValue",value:function(e,t){var n=this.getPrice();this.setMarketPrice(e);var a=this.poolBASE*(1+this.apr/100*t/365),r=this.poolUNDER*(1+this.apr/100*t/365),i=this.myLIQ/this.poolLIQ,o=a*i+r*i*e,s=o/e;return this.setMarketPrice(n),[o,s]}},{key:"addLiquidity",value:function(e,t){var n=e*(this.poolLIQ/this.poolUNDER);return this.poolUNDER+=e,this.poolBASE+=t,this.poolLIQ+=n,this.k=this.poolBASE*this.poolUNDER,n}},{key:"removeLiquidity",value:function(e){var t=e*(this.poolUNDER/this.poolLIQ),n=e*(this.poolBASE/this.poolLIQ);return this.poolUNDER-=t,this.poolBASE-=n,this.poolLIQ-=e,this.k=this.poolBASE*this.poolUNDER,[t,n]}},{key:"buyUNDER",value:function(e){var t=Math.abs(this.k/(this.poolBASE+e)-this.poolUNDER)*(1-this.feeInPercent/100);return this.poolUNDER-=t,this.poolBASE+=e,this.k=this.poolUNDER*this.poolBASE,t}},{key:"sellUNDER",value:function(e){var t=Math.abs(this.k/(this.poolUNDER+e)-this.poolBASE)*(1-this.feeInPercent/100);return this.poolUNDER+=e,this.poolBASE-=t,this.k=this.poolUNDER*this.poolBASE,t}},{key:"getInputPrice",value:function(e,t,n){return e*n/(t+e)}},{key:"setMarketPrice",value:function(e){var t=this.poolBASE*this.poolUNDER;this.poolUNDER=Math.sqrt(t/e),this.poolBASE=Math.sqrt(t*e),this.k=this.poolUNDER*this.poolBASE}},{key:"getPrice",value:function(){return this.poolBASE/this.poolUNDER}},{key:"getDecimals",value:function(){return this.addressUNDER===xe?6:"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599"===this.addressUNDER?8:18}}]),e}(),Ue=function(){function e(t,n,a,r,i){Object(l.a)(this,e),this.collateralUNDER=t,this.quantity=n,this.borrowedBASE=a,this.boughtUNDER=r,this.openingPrice=i}return Object(u.a)(e,[{key:"getMarketData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("dYdXLong market data loaded. ");case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){this.collateralUNDER=this.quantity,this.borrowedBASE=this.quantity*t,this.boughtUNDER=this.quantity,e.under.start=this.quantity,e.borrowedBASE=this.quantity*t,e.boughtUNDER=this.quantity}},{key:"getCurrentValue",value:function(e){var t=(this.collateralUNDER+this.boughtUNDER)*e-this.borrowedBASE;return[Math.max(0,t),Math.max(0,t)/e]}}]),e}(),Fe=function(){function e(t,n,a,r,i){Object(l.a)(this,e),this.collateralBASE=t,this.quantity=n,this.borrowedUNDER=a,this.boughtBASE=r,this.openingPrice=i}return Object(u.a)(e,[{key:"getMarketData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("dYdXShort market data loaded. ");case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){this.collateralBASE=this.quantity*t,this.borrowedUNDER=this.quantity,this.boughtBASE=this.quantity*t,e.base.start=this.quantity*t,e.borrowedUNDER=this.quantity,e.boughtBASE=this.quantity*t}},{key:"getCurrentValue",value:function(e){var t=this.collateralBASE+this.boughtBASE-this.borrowedUNDER*e;return[Math.max(0,t),Math.max(0,t)/e]}}]),e}(),He=function(){function e(t,n,a,r,i,o){Object(l.a)(this,e),this.isCall=t,this.isLong=n,this.quantity=a,this.strike=r,this.daysToExpiry=i,this.iv=o,this.optionMath=new Ne}return Object(u.a)(e,[{key:"getMarketData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("GammaOptions market data loaded. ");case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){var n=this.getCurrentValue(t,0)[0];this.isLong?(e.base.start=n,e.under.start=0):this.isCall?(e.base.start=n-this.quantity*t,e.under.start=this.quantity):(e.base.start=n,e.under.start=0)}},{key:"getCurrentValue",value:function(e,t){var n=this.quantity*this.optionMath.blackScholes(this.isCall?"call":"put",e,this.strike,(this.daysToExpiry-t)/365,.02,this.iv/100);return this.isLong?[n,n/e]:this.isCall?[this.quantity*e-n,(this.quantity*e-n)/e]:[this.quantity*this.strike-n,(this.quantity*this.strike-n)/e]}}]),e}(),Re=function(){function e(t,n,a,r){Object(l.a)(this,e),this.startBASE=t,this.extraBASE=n,this.startUNDER=a,this.extraUNDER=r}return Object(u.a)(e,[{key:"getMarketData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Manual market data not needed to be loaded, skip. ");case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){}},{key:"getCurrentValue",value:function(e){var t=this.startBASE+this.startUNDER*e;return[t,t/e]}}]),e}(),Ie=n(396),Le=function(){function e(t,n,a,r,i,o,s,u,c){Object(l.a)(this,e),this.myBASE=t,this.myUNDER=n,this.openingPrice=a,this.minPrice=r,this.maxPrice=i,this.feeInPercent=o,this.poolID=s,this.ignoreImpermanentLoss=u,this.apr=c,this.collectedFeesBASE=0,this.collectedFeesUNDER=0}return Object(u.a)(e,[{key:"getMarketData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){var a,r;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.poolID>0)){e.next=8;break}return a=Be(t,Ie.a,"0xC36442b4a4522E871399CD717aBDD847Ab11FE88"),e.next=4,a.methods.collect({tokenId:this.poolID,recipient:n.address,amount0Max:this.tokens(t,1e9).toString(),amount1Max:this.tokens(t,1e9).toString()}).call({from:n.address});case 4:r=e.sent,this.collectedFeesBASE=r.amount0/Math.pow(10,r.amount0.length>=15?18:6),this.collectedFeesUNDER=r.amount1/Math.pow(10,r.amount1.length>=15?18:6),console.log("UniswapV3 market data loaded");case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(e,t){}},{key:"getCurrentValue",value:function(e,t){if(this.ignoreImpermanentLoss){var n=this.myBASE+this.myUNDER*e,a=this.collectedFeesBASE+this.collectedFeesUNDER*e;return[n+a,(n+a)/e]}var r;this.openingTotalBASE=this.myBASE+this.myUNDER*this.openingPrice,this.token1V2=this.openingTotalBASE/2,this.token2V2=this.token1V2/this.openingPrice,this.L=Math.sqrt(this.token1V2*this.token2V2),this.L2=this.token1V2*this.token2V2,this.T=this.L*Math.sqrt(this.minPrice),this.H=this.L/Math.sqrt(this.maxPrice),this.maxToken2=this.L2/this.H-this.T,this.maxToken1=this.L2/this.T-this.H,this.LP_a=this.openingPrice>this.maxPrice?0:(this.L/Math.sqrt(this.openingPrice)-this.H)*this.openingPrice,this.LP_b=this.openingPrice>this.maxPrice?this.maxToken2:this.L*Math.sqrt(this.openingPrice)-this.T,this.LP=this.LP_a+this.LP_b,this.multiplier=this.openingPrice>this.minPrice?this.openingTotalBASE/this.LP:this.openingTotalBASE/(this.openingPrice*this.maxToken1),e<this.minPrice?(0,r=this.maxToken1*this.multiplier*e):e>=this.minPrice&&e<=this.maxPrice?r=(this.L/Math.sqrt(e)-this.H)*this.multiplier*e+(this.L*Math.sqrt(e)-this.T)*this.multiplier:e>this.maxPrice&&(0,r=this.maxToken2*this.multiplier);var i=1+this.apr/100*t/365;return[r*i,r*i/e]}},{key:"tokens",value:function(e,t){return new e.utils.BN(e.utils.toWei(t.toString()))}}]),e}(),_e=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={selectedType:{value:"uniswap",label:"uniswap"}},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getTypes",value:function(){return this.props.types.map(function(e,t){return{value:e,label:e}})}},{key:"render",value:function(){var e=this;return r.a.createElement(D,{title:"Add New",content:r.a.createElement("div",null,r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("h5",null,"Select subposition")))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(R.a,{placeholder:"Type",name:"type",value:this.state.selectedType,options:this.getTypes(),onChange:function(t){e.setState({selectedType:t})}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(M,{bsStyle:"info",fill:!0,onClick:function(){return e.props.addSubposition(e.state.selectedType.value)}},r.a.createElement("i",{className:"fa fa-plus"})," Add subposition"))))})}}]),t}(a.Component),We=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onChangeStartBase",value:function(e){var t=Pe(this.props.subposition);t.base.start=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeExtraBase",value:function(e){var t=Pe(this.props.subposition);t.base.extra=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeStartUnder",value:function(e){var t=Pe(this.props.subposition);t.under.start=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeExtraUnder",value:function(e){var t=Pe(this.props.subposition);t.under.extra=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeStartLiq",value:function(e){var t=Pe(this.props.subposition);t.liq.start=Number(e),t.service.myLIQ=Number(e)+t.liq.extra,this.props.updateSubposition(this.props.index,t)}},{key:"onChangeExtraLiq",value:function(e){var t=Pe(this.props.subposition);t.liq.extra=Number(e),t.service.myLIQ=t.liq.start+Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeAPR",value:function(e){var t=Pe(this.props.subposition);t.apr=Number(e),t.service.apr=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeEnabled",value:function(e){var t=Pe(this.props.subposition);t.enabled=e,this.props.updateSubposition(this.props.index,t)}},{key:"getTitle",value:function(){var e=this;return r.a.createElement(b.n,null,r.a.createElement(b.b,{md:4},r.a.createElement(b.f,{type:"checkbox",checked:this.props.subposition.enabled,onChange:function(t){return e.onChangeEnabled(t.target.checked)}})),r.a.createElement(b.b,{md:6},"UniswapV2"))}},{key:"render",value:function(){var e=this,t=r.a.createElement(b.q,{id:"edit_tooltip"},"Close this subposition");return r.a.createElement(D,{title:this.getTitle(),rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:t},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0,onClick:function(){return e.props.removeSubposition(e.props.index)}},r.a.createElement("i",{className:"fa fa-times"}))),content:r.a.createElement("div",null,r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.base.start,onChange:function(t){return e.onChangeStartBase(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Extra BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.base.extra,onChange:function(t){return e.onChangeExtraBase(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.under.start,onChange:function(t){return e.onChangeStartUnder(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Extra UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.under.extra,onChange:function(t){return e.onChangeExtraUnder(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start LIQ:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.liq.start,onChange:function(t){return e.onChangeStartLiq(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Extra LIQ:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.liq.extra,onChange:function(t){return e.onChangeExtraLiq(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"APR [%]:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"%",type:"number",min:0,value:this.props.subposition.apr,onChange:function(t){return e.onChangeAPR(t.target.value)}}))))})}}]),t}(a.Component),qe=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onChangeStartBase",value:function(e){var t=Pe(this.props.subposition);t.base.start=Number(e),t.service.myBASE=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeExtraBase",value:function(e){var t=Pe(this.props.subposition);t.base.extra=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeStartUnder",value:function(e){var t=Pe(this.props.subposition);t.under.start=Number(e),t.service.myUNDER=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeExtraUnder",value:function(e){var t=Pe(this.props.subposition);t.under.extra=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeMinPrice",value:function(e){var t=Pe(this.props.subposition);t.minPrice=Number(e),t.service.minPrice=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeMaxPrice",value:function(e){var t=Pe(this.props.subposition);t.maxPrice=Number(e),t.service.maxPrice=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeOpeningPrice",value:function(e){var t=Pe(this.props.subposition);t.openingPrice=Number(e),t.service.openingPrice=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeIgnoreImpermanentLoss",value:function(e){var t=Pe(this.props.subposition);t.ignoreImpermanentLoss=1===e,t.service.ignoreImpermanentLoss=1===e,this.props.updateSubposition(this.props.index,t)}},{key:"onChangeAPR",value:function(e){var t=Pe(this.props.subposition);t.apr=Number(e),t.service.apr=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeEnabled",value:function(e){var t=Pe(this.props.subposition);t.enabled=e,this.props.updateSubposition(this.props.index,t)}},{key:"getTitle",value:function(){var e=this;return r.a.createElement(b.n,null,r.a.createElement(b.b,{md:4},r.a.createElement(b.f,{type:"checkbox",checked:this.props.subposition.enabled,onChange:function(t){return e.onChangeEnabled(t.target.checked)}})),r.a.createElement(b.b,{md:6},"UniswapV3"))}},{key:"render",value:function(){var e=this,t=r.a.createElement(b.q,{id:"edit_tooltip"},"Close this subposition");return r.a.createElement(D,{title:this.getTitle(),rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:t},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0,onClick:function(){return e.props.removeSubposition(e.props.index)}},r.a.createElement("i",{className:"fa fa-times"}))),content:r.a.createElement("div",null,r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.base.start,onChange:function(t){return e.onChangeStartBase(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Extra BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.base.extra,onChange:function(t){return e.onChangeExtraBase(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.under.start,onChange:function(t){return e.onChangeStartUnder(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Extra UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.under.extra,onChange:function(t){return e.onChangeExtraUnder(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Min price:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"MinPrice",type:"number",min:0,value:this.props.subposition.minPrice,onChange:function(t){return e.onChangeMinPrice(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Max price:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"MaxPrice",type:"number",min:0,value:this.props.subposition.maxPrice,onChange:function(t){return e.onChangeMaxPrice(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Opening price:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"OpeningPrice",type:"number",min:0,value:this.props.subposition.openingPrice,onChange:function(t){return e.onChangeOpeningPrice(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Ignore IL:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"IgnoreImpermanentLoss",type:"number",min:0,value:this.props.subposition.ignoreImpermanentLoss?1:0,onChange:function(t){return e.onChangeIgnoreImpermanentLoss(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"APR [%]:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"APR",type:"number",min:0,value:this.props.subposition.apr,onChange:function(t){return e.onChangeAPR(t.target.value)}}))))})}}]),t}(a.Component),Ve=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onChangeQuantity",value:function(e){var t=Pe(this.props.subposition);t.quantity=Number(e),t.service.quantity=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeStartUnder",value:function(e){var t=Pe(this.props.subposition);t.under.start=Number(e),t.service.collateralUNDER=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeBorrowedBase",value:function(e){var t=Pe(this.props.subposition);t.borrowedBASE=Number(e),t.service.borrowedBASE=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeBoughtUnder",value:function(e){var t=Pe(this.props.subposition);t.boughtUNDER=Number(e),t.service.boughtUNDER=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeEnabled",value:function(e){var t=Pe(this.props.subposition);t.enabled=e,this.props.updateSubposition(this.props.index,t)}},{key:"getTitle",value:function(){var e=this;return r.a.createElement(b.n,null,r.a.createElement(b.b,{md:4},r.a.createElement(b.f,{type:"checkbox",checked:this.props.subposition.enabled,onChange:function(t){return e.onChangeEnabled(t.target.checked)}})),r.a.createElement(b.b,{md:6},"dYdX Long"))}},{key:"render",value:function(){var e=this,t=r.a.createElement(b.q,{id:"edit_tooltip"},"Close this subposition");return r.a.createElement(D,{title:this.getTitle(),rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:t},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0,onClick:function(){return e.props.removeSubposition(e.props.index)}},r.a.createElement("i",{className:"fa fa-times"}))),content:r.a.createElement("div",null,r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Quantity:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Quantity",type:"number",min:0,value:this.props.subposition.quantity,onChange:function(t){return e.onChangeQuantity(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",disabled:!0,min:0,value:this.props.subposition.under.start,onChange:function(t){return e.onChangeStartUnder(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Borrowed BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",disabled:!0,min:0,value:this.props.subposition.borrowedBASE,onChange:function(t){return e.onChangeBorrowedBase(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Bought UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",disabled:!0,min:0,value:this.props.subposition.boughtUNDER,onChange:function(t){return e.onChangeBoughtUnder(t.target.value)}}))))})}}]),t}(a.Component),ze=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onChangeQuantity",value:function(e){var t=Pe(this.props.subposition);t.quantity=Number(e),t.service.quantity=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeStartBase",value:function(e){var t=Pe(this.props.subposition);t.base.start=Number(e),t.service.collateralBASE=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeBorrowedUnder",value:function(e){var t=Pe(this.props.subposition);t.borrowedUNDER=Number(e),t.service.borrowedUNDER=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeBoughtBase",value:function(e){var t=Pe(this.props.subposition);t.boughtBASE=Number(e),t.service.boughtBASE=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeEnabled",value:function(e){var t=Pe(this.props.subposition);t.enabled=e,this.props.updateSubposition(this.props.index,t)}},{key:"getTitle",value:function(){var e=this;return r.a.createElement(b.n,null,r.a.createElement(b.b,{md:4},r.a.createElement(b.f,{type:"checkbox",checked:this.props.subposition.enabled,onChange:function(t){return e.onChangeEnabled(t.target.checked)}})),r.a.createElement(b.b,{md:6},"dYdX Short"))}},{key:"render",value:function(){var e=this,t=r.a.createElement(b.q,{id:"edit_tooltip"},"Close this subposition");return r.a.createElement(D,{title:this.getTitle(),rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:t},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0,onClick:function(){return e.props.removeSubposition(e.props.index)}},r.a.createElement("i",{className:"fa fa-times"}))),content:r.a.createElement("div",null,r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Quantity:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Quantity",type:"number",min:0,value:this.props.subposition.quantity,onChange:function(t){return e.onChangeQuantity(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",disabled:!0,min:0,value:this.props.subposition.base.start,onChange:function(t){return e.onChangeStartBase(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Borrowed UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",disabled:!0,min:0,value:this.props.subposition.borrowedUNDER,onChange:function(t){return e.onChangeBorrowedUnder(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Bought BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",disabled:!0,min:0,value:this.props.subposition.boughtBASE,onChange:function(t){return e.onChangeBoughtBase(t.target.value)}}))))})}}]),t}(a.Component),Ge=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onChangeIsLong",value:function(e){var t=Pe(this.props.subposition);t.isLong="B"===e,t.service.isLong="B"===e,this.props.updateSubposition(this.props.index,t)}},{key:"onChangeIsCall",value:function(e){var t=Pe(this.props.subposition);t.isCall="C"===e,t.service.isCall="C"===e,this.props.updateSubposition(this.props.index,t)}},{key:"onChangeQuantity",value:function(e){var t=Pe(this.props.subposition);t.quantity=Number(e),t.service.quantity=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeStrike",value:function(e){var t=Pe(this.props.subposition);t.strike=Number(e),t.service.strike=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeDaysToExpiry",value:function(e){var t=Pe(this.props.subposition);t.daysToExpiry=Number(e),t.service.daysToExpiry=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeIV",value:function(e){var t=Pe(this.props.subposition);t.iv=Number(e),t.service.iv=Number(e),this.props.updateSubposition(this.props.index,t)}},{key:"onChangeEnabled",value:function(e){var t=Pe(this.props.subposition);t.enabled=e,this.props.updateSubposition(this.props.index,t)}},{key:"getTitle",value:function(){var e=this;return r.a.createElement(b.n,null,r.a.createElement(b.b,{md:4},r.a.createElement(b.f,{type:"checkbox",checked:this.props.subposition.enabled,onChange:function(t){return e.onChangeEnabled(t.target.checked)}})),r.a.createElement(b.b,{md:6},"Gamma Options"))}},{key:"render",value:function(){var e=this,t=r.a.createElement(b.q,{id:"edit_tooltip"},"Close this subposition");return r.a.createElement(D,{title:this.getTitle(),rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:t},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0,onClick:function(){return e.props.removeSubposition(e.props.index)}},r.a.createElement("i",{className:"fa fa-times"}))),content:r.a.createElement("div",null,r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Buy or Sell:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"BuyOrSell",type:"text",value:this.props.subposition.isLong?"B":"S",onChange:function(t){return e.onChangeIsLong(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Call or Put:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"text",value:this.props.subposition.isCall?"C":"P",onChange:function(t){return e.onChangeIsCall(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Quantity:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.quantity,onChange:function(t){return e.onChangeQuantity(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Strike:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.strike,onChange:function(t){return e.onChangeStrike(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Days to expiry:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.daysToExpiry,onChange:function(t){return e.onChangeDaysToExpiry(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"IV [%]:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{placeholder:"Amount",type:"number",min:0,value:this.props.subposition.iv,onChange:function(t){return e.onChangeIV(t.target.value)}}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start BASE:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{disabled:!0,placeholder:"Amount",type:"number",value:this.props.subposition.base.start.toFixed(2)}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},"Start UNDER:"),r.a.createElement(b.b,{md:6},r.a.createElement(b.f,{disabled:!0,placeholder:"Amount",type:"number",min:0,value:this.props.subposition.under.start.toFixed(2)}))))})}}]),t}(a.Component),Ye=n(172),Xe=n.n(Ye),$e=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={chartLoaded:!1,chartData:[5*Math.random(),2,1],customMinX:100,customMaxX:3e3,customXUserSet:!1,customMinY:void 0,customMaxY:void 0,currentPrice:0},n.addSubposition=n.addSubposition.bind(Object(p.a)(Object(p.a)(n))),n.updateSubposition=n.updateSubposition.bind(Object(p.a)(Object(p.a)(n))),n.removeSubposition=n.removeSubposition.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){var a,r;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.userModelLoaded()||!this.props.selectedPosition){e.next=10;break}if(t.selectedPosition===this.props.selectedPosition){e.next=7;break}for(a=Pe(this.props.selectedPosition),r=0;r<a.subpositions.length;r++)a.subpositions[r].enabled=!0;this.setState({customPosition:a}),e.next=10;break;case 7:if(n.customPosition===this.state.customPosition){e.next=10;break}return e.next=10,this.refreshChart();case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"userModelLoaded",value:function(){var e=this.props.userModel;return e&&e.positions&&Array.isArray(e.positions)}},{key:"refreshChart",value:function(){var e=Object(Te.a)(Se.a.mark(function e(){var t,n,a;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Refreshing chart data. Position: "),t=this.state.customPosition,console.log(t),e.next=5,this.prepareChartData(t,0);case 5:return n=e.sent,e.next=8,this.prepareChartData(t,30);case 8:a=e.sent,this.setState({chartLoaded:!0,chartData1:n.aprsBASE,chartData2:n.profitsBASE,chartData3:n.profitsUNDER,chartData4:a.profitsBASE,rangeEdgesBASE:n.rangeEdgesBASE,rangeEdgesUNDER:n.rangeEdgesUNDER,currentPrice:n.currentPrice,customMinX:this.state.customXUserSet?this.state.customMinX:n.customMinX,customMaxX:this.state.customXUserSet?this.state.customMaxX:n.customMaxX});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"prepareChartData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){var a,r,i,o,s,l,u,c,m,d,p,h,f,b,y,g,v,E,S,T,A,k,w,D,C,x;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(new Date-new Date(t.startDate))/864e5,r=this.getChartWindow(t),i=0,o=25*r.step,s=r.right,l=r.step,u=[],c=[],m=[],d=o;case 8:if(!(d<s)){e.next=42;break}p=0,h=0,f=0,b=0,y=0;case 11:if(!(y<t.subpositions.length)){e.next=30;break}if((g=t.subpositions[y]).enabled&&(f+=g.base.start,b+=g.under.start,v=g.base.extra+g.under.extra*d,p+=g.service.getCurrentValue(d,n)[0]+v,E=g.base.extra/d+g.under.extra,h+=g.service.getCurrentValue(d,n)[1]+E),0!==i){e.next=27;break}if("uniswap"!==g.type){e.next=19;break}i=g.service.getPrice(),e.next=27;break;case 19:return e.next=21,we.getTokenPriceInUSD(t.base.address);case 21:return e.t0=e.sent,e.next=24,we.getTokenPriceInUSD(t.under.address);case 24:e.t1=e.sent,S={priceBASEUSD:e.t0,priceUNDERUSD:e.t1},i=S.priceUNDERUSD/S.priceBASEUSD;case 27:y++,e.next=11;break;case 30:T=Me(d,b,0,p),A=T[1]-f,k=A/(f+b*d)/a*365*100,w=Oe(d,f,h,0),D=w[0]-b,u.push({x:d,y:k}),c.push({x:d,y:A}),m.push({x:d,y:D});case 39:d+=l,e.next=8;break;case 42:return C=this.getRangePoints(c),x=this.getRangePoints(m),e.abrupt("return",{aprsBASE:u,profitsBASE:c,profitsUNDER:m,rangeEdgesBASE:C,rangeEdgesUNDER:x,currentPrice:i,customMinX:r.left,customMaxX:r.right});case 45:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getChartWindow",value:function(e){var t,n=e.entryPrice;return n<1?t=.001:n<10?t=.01:n<100?t=.1:n<1e3?t=1:n<1e4?t=10:n<1e5&&(t=100),{left:Number(n/3),right:1e4,step:t}}},{key:"getRangePoints",value:function(e){for(var t=-1e11,n=0;n<e.length;n++)t<e[n].y&&(t=e[n].y);for(var a,r={x:e[0].x,y:e[0].y},i=r,o=null,s=0;s<e.length;s++)i===r&&e[s].y>=.9*t&&(i={x:e[s].x,y:e[s].y}),i!==r&&null===o&&e[s].y<.9*t&&(o=a),a={x:e[s].x,y:e[s].y};return null===o&&(o=a),[i,o]}},{key:"getPerformanceChartOptions",value:function(){return{chart:{type:"line",height:"600"},title:{text:"Position: "+(null!=this.state.customPosition?this.state.customPosition.name:"unknown")},xAxis:{min:this.state.customMinX,max:this.state.customMaxX,plotLines:[{color:"#3D3D3D",width:2,value:this.state.currentPrice?this.state.currentPrice:0,label:{text:"Current price"}}],plotBands:[{from:this.state.rangeEdgesUNDER?this.state.rangeEdgesUNDER[0].x:0,to:this.state.rangeEdgesUNDER?this.state.rangeEdgesUNDER[1].x:0,color:"rgba(165, 244, 151, 0.4)",label:{text:"90% UNDER",style:{color:"#606060"}}},{from:this.state.rangeEdgesBASE?this.state.rangeEdgesBASE[0].x:0,to:this.state.rangeEdgesBASE?this.state.rangeEdgesBASE[1].x:0,color:"rgba(242, 240, 150, 0.4)",label:{text:"90% BASE",style:{color:"#606060"}}}]},yAxis:[{title:{text:"APR [%]"},min:-100,plotBands:[{from:0,to:-1e10,color:"rgba(255, 33, 33, 0.06)",label:{text:"Red Zone"}}]},{title:{text:"Profit [BASE]"},opposite:!0,min:this.state.customMinY,max:this.state.customMaxY},{title:{text:"Profit [UNDER]"},opposite:!0}],series:[{name:"APR [%] (BASE or UNDER)",data:this.state.chartData1,tooltip:{valueSuffix:"%"},turboThreshold:1e4},{name:"Profit Today [BASE]",data:this.state.chartData2,yAxis:1,tooltip:{valueSuffix:" BASE"},turboThreshold:1e4},{name:"Profit Future [BASE]",data:this.state.chartData4,yAxis:1,tooltip:{valueSuffix:" BASE"},turboThreshold:1e4}],tooltip:{shared:!0,valueDecimals:2},credits:{enabled:!1}}}},{key:"addSubposition",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t){var n,a;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"uniswap"===t?n={type:t,marketAddress:"0xA478c2975Ab1Ea89e8196811F51A7B7Ade33eB11",base:{start:1800,extra:0},under:{start:1,extra:0},liq:{start:30.67,extra:0},apr:20}:"uniswapv3"===t?n={type:t,marketAddress:"0xA478c2975Ab1Ea89e8196811F51A7B7Ade33eB11",openingPrice:this.state.currentPrice,base:{start:1e3,extra:0},under:{start:0,extra:0},minPrice:3120,maxPrice:4680,feeInPercent:.3}:"dydx-long"===t?n={type:"dydx-long",base:{start:0,extra:0},under:{start:1,extra:0},quantity:1,borrowedBASE:2700,boughtUNDER:1,openingPrice:2700}:"dydx-short"===t?n={type:"dydx-short",base:{start:2700,extra:0},under:{start:0,extra:0},quantity:1,borrowedUNDER:1,boughtBASE:2700,openingPrice:2700}:"option"===t&&(n={type:t,base:{start:183,extra:0},under:{start:0,extra:0},isCall:!0,isLong:!0,quantity:1,strike:3200,daysToExpiry:30,iv:86}),e.next=3,this.props.addService(this.state.customPosition,n);case 3:a=Pe(this.state.customPosition),n.enabled=!0,a.subpositions.push(n),this.setState({customPosition:a});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateSubposition",value:function(e,t){var n=Pe(this.state.customPosition);n.subpositions[e]=t,t.service.update(t,this.state.currentPrice),console.log(n),this.setState({customPosition:n})}},{key:"removeSubposition",value:function(e){var t=Pe(this.state.customPosition);t.subpositions.splice(e,1),this.setState({customPosition:t})}},{key:"displayCard",value:function(e,t){return"uniswap"===e.type?r.a.createElement(We,{index:t,subposition:e,updateSubposition:this.updateSubposition,removeSubposition:this.removeSubposition}):"uniswapv3"===e.type?r.a.createElement(qe,{index:t,subposition:e,updateSubposition:this.updateSubposition,removeSubposition:this.removeSubposition}):"dydx-long"===e.type?r.a.createElement(Ve,{index:t,subposition:e,updateSubposition:this.updateSubposition,removeSubposition:this.removeSubposition}):"dydx-short"===e.type?r.a.createElement(ze,{index:t,subposition:e,updateSubposition:this.updateSubposition,removeSubposition:this.removeSubposition}):"option"===e.type?r.a.createElement(Ge,{index:t,subposition:e,updateSubposition:this.updateSubposition,removeSubposition:this.removeSubposition}):void 0}},{key:"getSubpositionCards",value:function(){var e=this;return this.state.customPosition?this.state.customPosition.subpositions.map(function(t,n){return r.a.createElement(b.b,{md:4,key:n},e.displayCard(t,n))}):null}},{key:"render",value:function(){var e=this,t=r.a.createElement(b.q,{id:"edit_tooltip"},"Portfolio history panel displays a chart of daily historical snapshots of your portfolio. All changes to your portfolio are taken into account: trades, deposits and withdrawals.",r.a.createElement("br",null),r.a.createElement("br",null),"Easily zoom in/out with predefined time periods, or use the slider on the bottom to fine tune.");return r.a.createElement(D,{title:"How does my position looks like?",rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:t},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help")),content:r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(w.a,{highcharts:Xe.a,options:this.getPerformanceChartOptions()}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:2},"Price:"),r.a.createElement(b.b,{md:2},r.a.createElement(b.f,{placeholder:"Min X",type:"number",name:"customMinX",min:0,value:this.state.customMinX,onChange:function(t){e.setState({customMinX:Number(t.target.value),customXUserSet:!0})}})," "),r.a.createElement(b.b,{md:2},r.a.createElement(b.f,{placeholder:"Max X",type:"number",name:"customMaxX",min:0,value:this.state.customMaxX,onChange:function(t){e.setState({customMaxX:Number(t.target.value),customXUserSet:!0})}})),r.a.createElement(b.b,{md:2},"Profit [BASE]:"),r.a.createElement(b.b,{md:2},r.a.createElement(b.f,{placeholder:"Min Y",type:"number",name:"customMinY",value:this.state.customMinY,onChange:function(t){e.setState({customMinY:Number(t.target.value)})}}),"\xa0"),r.a.createElement(b.b,{md:2},r.a.createElement(b.f,{placeholder:"Max Y",type:"number",name:"customMaxY",value:this.state.customMaxY,onChange:function(t){e.setState({customMaxY:Number(t.target.value)})}}))),r.a.createElement(b.n,null,this.getSubpositionCards(),r.a.createElement(b.b,{md:4},r.a.createElement(_e,{types:["uniswap","uniswapv3","dydx-long","dydx-short","option"],addSubposition:this.addSubposition})))))})}}]),t}(a.Component),Qe=n(397),Je=n.n(Qe),Ke=n(398),Ze=n.n(Ke);function et(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var nt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).displayDescription=function(e){return e?e.text:null},n.displayLinks=function(e){return e?e.links.map(function(e,t){return r.a.createElement("span",{key:t},r.a.createElement("a",{href:e.link},e.anchor)," ")}):null},n.hideConfirmDialog=n.hideConfirmDialog.bind(Object(p.a)(Object(p.a)(n))),n.removeTransaction=n.removeTransaction.bind(Object(p.a)(Object(p.a)(n))),n.hideChartDialog=n.hideChartDialog.bind(Object(p.a)(Object(p.a)(n))),n.loadWeb3Account=n.loadWeb3Account.bind(Object(p.a)(Object(p.a)(n))),n.addService=n.addService.bind(Object(p.a)(Object(p.a)(n))),n.state={isConfirmDialogShown:!1,removedTransaction:null,isChartDialogShown:!1,web3DataLoaded:!1,selectedPosition:null,console:"Loading positions..."},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(Te.a)(Se.a.mark(function e(){var t,n,a,r;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Navigate to: "+window.location.pathname+window.location.hash),z.a.pageview(window.location.pathname+window.location.hash),t={walletconnect:{package:Ze.a,options:{infuraId:"1e22b4bd561c46ada64b5690d1fbb261"}}},n=new Je.a({network:"mainnet",cacheProvider:!0,providerOptions:t}),e.next=6,n.connect();case 6:a=e.sent,r=new ke.a(a),a.on("accountsChanged",function(e){console.log("accountsChanged: "+e)}),a.on("chainChanged",function(e){console.log("chainChanged: "+e)}),a.on("connect",function(e){console.log("connect: "+e)}),a.on("disconnect",function(e){console.log("disconnect: "+e)}),this.setState({web3:r});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadWeb3Account",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t){var n;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.enable();case 3:return e.next=5,t.eth.getAccounts();case 5:return n=e.sent,e.abrupt("return",n[0]);case 9:e.prev=9,e.t0=e.catch(0),console.error("Unable to load web3 account. Please enable web3 wallet in your browser. Message: "+e.t0.getMessage());case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(Te.a)(Se.a.mark(function e(){var t,n;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.userModel&&this.props.userModel.positions&&Array.isArray(this.props.userModel.positions)&&this.state.web3)){e.next=15;break}if(this.state.web3DataLoaded){e.next=15;break}return console.log("Loading web3 data and setting up data for table"),this.setState({console:"Loading web3 data and setting up data for table"}),this.setState({web3DataLoaded:!0}),this.setState({console:"Loading web3 data and setting up data for table"}),t=Object(Y.a)(this.props.userModel.positions),e.next=9,this.loadWeb3Data(t);case 9:return this.setState({console:"Preparing table data..."}),e.next=12,this.prepareTableData(t);case 12:n=e.sent,this.setState({data:n,selectedPosition:t[0]}),this.setState({console:t.length+" positions"});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadWeb3Data",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t){var n,a,r,i;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=15;break}a=t[n],r=0;case 4:if(!(r<a.subpositions.length)){e.next=12;break}return i=a.subpositions[r],this.setState({console:"Loading "+(n+1)+"/"+t.length+"..."}),e.next=9,this.addService(a,i);case 9:r++,e.next=4;break;case 12:n++,e.next=1;break;case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addService",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t,n){var a;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.type,e.next="uniswap"===e.t0?3:"dydx-long"===e.t0?5:"dydx-short"===e.t0?7:"option"===e.t0?9:"manual"===e.t0?11:"uniswapv3"===e.t0?13:15;break;case 3:return a=new je(n.marketAddress,t.base.address,t.under.address,n.liq.start,n.apr),e.abrupt("break",16);case 5:return a=new Ue(n.under.start,n.quantity,n.borrowedBASE,n.boughtUNDER,n.openingPrice),e.abrupt("break",16);case 7:return a=new Fe(n.base.start,n.quantity,n.borrowedUNDER,n.boughtBASE,n.openingPrice),e.abrupt("break",16);case 9:return a=new He(n.isCall,n.isLong,n.quantity,n.strike,n.daysToExpiry,n.iv),e.abrupt("break",16);case 11:return a=new Re(n.base.start,n.base.extra,n.under.start,n.under.extra),e.abrupt("break",16);case 13:return a=new Le(n.base.start,n.under.start,n.openingPrice,n.minPrice,n.maxPrice,n.feeInPercent,n.poolID,n.ignoreImpermanentLoss,n.apr),e.abrupt("break",16);case 15:console.log("There was an error in addService()");case 16:return e.next=18,a.getMarketData(this.state.web3,t);case 18:console.log(a),n.service=a;case 20:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"prepareTableData",value:function(){var e=Object(Te.a)(Se.a.mark(function e(t){var n,a,i,o=this;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Se.a.mark(function e(a){var i,s,l,u,c,m,d,p,h,f,b,y,g,v,E,S,T,A,k,w,D,C,x,B,O,P,N,j,U,F,H,R,I;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t[a],s=new Date(i.startDate),l=(new Date-s)/864e5,u=void 0,c=void 0,m=0;m<i.subpositions.length;m++)"uniswap"===(d=i.subpositions[m]).type&&(u=Pe(d.service),c=u.getPrice());if(u){e.next=14;break}return e.next=8,we.getTokenPriceInUSD(i.base.address);case 8:return e.t0=e.sent,e.next=11,we.getTokenPriceInUSD(i.under.address);case 11:e.t1=e.sent,u={priceBASEUSD:e.t0,priceUNDERUSD:e.t1},c=u.priceUNDERUSD/u.priceBASEUSD;case 14:for(p=0,h=0,f=0;f<i.subpositions.length;f++)(b=i.subpositions[f]).isStacked||(p+=b.base.start+b.under.start*c),y=b.base.extra+b.under.extra*c,b.isStacked?(g=b.base.start+b.under.start*c,h+=b.service.getCurrentValue(c,0)[0]+y-g):h+=b.service.getCurrentValue(c,0)[0]+y;E=30.4167*(v=h-p)/l,S=v/p/l*365*100,T=i.subpositions[0],A=c,k=v/c,w=E/c,D=S,"uniswap"===T.type&&T.base.start>0&&T.under.start>0&&(C=o.findMaxUNDER(i),A=C[0],k=C[1],x=C[2],w=30.4167*k/l,D=k/x/l*365*100),B=c,O=v,P=E,N=S,"uniswap"===T.type&&T.base.start>0&&T.under.start>0&&(j=o.findMaxBASE(i),B=j[0],O=j[1],U=j[2],P=30.4167*O/l,N=O/U/l*365*100),F=k*A*u.priceBASEUSD,H="DAI"===i.base.symbol||"USDC"===i.base.symbol||"UST"===i.base.symbol?O*u.priceBASEUSD:O/B*u.priceUNDERUSD,R=w*A*u.priceBASEUSD,I="DAI"===i.base.symbol||"USDC"===i.base.symbol||"UST"===i.base.symbol?P*u.priceBASEUSD:P/B*u.priceUNDERUSD,i.maxProfitTargetUSD=Math.max(F,H),i.maxProfitPerMonthTargetUSD=Math.max(I,R),n.push({id:i,position:[i.name,i.description,i.address],sizedays:{size:[h*u.priceBASEUSD,"USD"],days:[l.toFixed(0),"days"]},price:{lower:[A,i.base.symbol],current:[c,i.base.symbol],higher:[B,i.base.symbol]},totalprofit:{lower:[k,i.under.symbol,F],current:[u.priceBASEUSD*v,"USD",u.priceBASEUSD*v],higher:[O,i.base.symbol,H]},monthlyprofit:{lower:[w,i.under.symbol,R],current:[u.priceBASEUSD*E,"USD",u.priceBASEUSD*E],higher:[P,i.base.symbol,I]},apr:{lower:[D,"%"],current:[S,"%"],higher:[N,"%"]},actions:r.a.createElement("div",{className:"actions-right"},r.a.createElement(M,{onClick:function(){return o.setState({isChartDialogShown:!1,selectedPosition:t[a]}),!0},bsStyle:"default",table:!0,simple:!0,icon:!0},r.a.createElement("i",{className:"fas fa-chart-area"}))," ",r.a.createElement("br",null),r.a.createElement(M,{onClick:function(){return!0},bsStyle:"default",table:!0,simple:!0,icon:!0},r.a.createElement("i",{className:"fa fa-edit"}))," ",r.a.createElement("br",null),r.a.createElement(M,{onClick:function(){return o.setState({isConfirmDialogShown:!0}),!0},bsStyle:"danger",table:!0,simple:!0,icon:!0},r.a.createElement("i",{className:"fa fa-times"}))," ")});case 37:case"end":return e.stop()}},e)}),i=0;case 3:if(!(i<t.length)){e.next=8;break}return e.delegateYield(a(i),"t0",5);case 5:i++,e.next=3;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"findMaxBASE",value:function(e){for(var t=.1,n=-1e11,a=-1e11,r=-1e11,i=.1;i<5e3;i+=.01){for(var o=0,s=0,l=0,u=0;u<e.subpositions.length;u++){var c=e.subpositions[u];c.isStacked||(s+=c.base.start,l+=c.under.start);var m=c.base.extra+c.under.extra*i;if(c.isStacked){var d=c.base.start+c.under.start*i;o+=c.service.getCurrentValue(i,0)[0]+m-d}else o+=c.service.getCurrentValue(i,0)[0]+m}var p=Me(i,l,0,o);n<p[1]&&(n=p[1],a=p[1]-s,r=s+l*(t=i))}return[t,a,r]}},{key:"findMaxUNDER",value:function(e){for(var t=.1,n=-1e11,a=-1e11,r=-1e11,i=.1;i<5e3;i+=.01){for(var o=0,s=0,l=0,u=0;u<e.subpositions.length;u++){var c=e.subpositions[u];c.isStacked||(s+=c.base.start,l+=c.under.start);var m=c.under.extra+c.base.extra/i;if(c.isStacked){var d=c.base.start/i+c.under.start;o+=c.service.getCurrentValue(i,0)[1]+m-d}else o+=c.service.getCurrentValue(i,0)[1]+m}var p=Oe(i,s,o,0);n<p[0]&&(n=p[0],a=p[0]-l,r=s/(t=i)+l)}return[t,a,r]}},{key:"getTotalProfitSum",value:function(){for(var e=0,t=0;t<this.props.userModel.positions.length;t++)this.props.userModel.positions[t].maxProfitTargetUSD&&(e+=this.props.userModel.positions[t].maxProfitTargetUSD);return e}},{key:"getMonthlyProfitSum",value:function(){for(var e=0,t=0;t<this.props.userModel.positions.length;t++)this.props.userModel.positions[t].maxProfitPerMonthTargetUSD&&(e+=this.props.userModel.positions[t].maxProfitPerMonthTargetUSD);return e}},{key:"getSumFooter",value:function(e,t,n,a){var r,i=0,o=et(e.data);try{for(o.s();!(r=o.n()).done;){i+=r.value[t][n][a]}}catch(s){o.e(s)}finally{o.f()}return i}},{key:"getTableColumns",value:function(){var e=this;return[{Header:"Position",accessor:"position",maxWidth:550,style:{whiteSpace:"unset"},filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())},Cell:function(t){return r.a.createElement("span",{style:{float:"left"}},r.a.createElement("b",null,t.value[0]),r.a.createElement("br",null),e.displayDescription(t.value[1]),r.a.createElement("br",null),e.displayLinks(t.value[1]),r.a.createElement("a",{href:"https://zapper.fi/account/"+t.value[2]},"Zap"))}},{Header:"Size/Days",accessor:"sizedays",maxWidth:120,filterable:!1,Cell:function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},"$"+C.formatNumber(e.value.size[0],0)),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.days[0],0)+" "+e.value.days[1]))},Footer:function(t){return r.a.createElement("span",{style:{float:"right"}},r.a.createElement("strong",null,C.formatNumber(e.getSumFooter(t,"sizedays","size",0),0)+" "+t.data[0].sizedays.size[1]))},sortMethod:function(e,t){return t[0]-e[0]}},{Header:"Price",accessor:"price",maxWidth:130,filterable:!1,Cell:function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.lower[0],2)+" "+e.value.lower[1]),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.current[0],2)+" "+e.value.current[1]),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.higher[0],2)+" "+e.value.higher[1]))},sortMethod:function(e,t){return t[0]-e[0]},Footer:function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},"@current"),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},"@target"))}},{Header:"Total Profit",accessor:"totalprofit",maxWidth:350,filterable:!1,Cell:function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.lower[0],0)+" "+e.value.lower[1]+" ($"+C.formatNumber(e.value.lower[2],0)+")"),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.current[0],0)+" "+e.value.current[1]+" ($"+C.formatNumber(e.value.current[2],0)+")"),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.higher[0],0)+" "+e.value.higher[1]+" ($"+C.formatNumber(e.value.higher[2],0)+")"))},sortMethod:function(e,t){return t[0]-e[0]},Footer:function(t){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.getSumFooter(t,"totalprofit","current",0),0)+" "+t.data[0].totalprofit.current[1]),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.getTotalProfitSum(),0)+" "+t.data[0].totalprofit.current[1]))}},{Header:"Monthly Profit",accessor:"monthlyprofit",maxWidth:350,filterable:!1,Cell:function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.lower[0],0)+" "+e.value.lower[1]+" ($"+C.formatNumber(e.value.lower[2],0)+")"),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.current[0],0)+" "+e.value.current[1]+" ($"+C.formatNumber(e.value.current[2],0)+")"),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.higher[0],0)+" "+e.value.higher[1]+" ($"+C.formatNumber(e.value.higher[2],0)+")"))},sortMethod:function(e,t){return t[0]-e[0]},Footer:function(t){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.getSumFooter(t,"monthlyprofit","current",0),0)+" "+t.data[0].monthlyprofit.current[1]),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.getMonthlyProfitSum(),0)+" "+t.data[0].monthlyprofit.current[1]))}},{Header:"APR",accessor:"apr",maxWidth:70,filterable:!1,Cell:function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.lower[0],2)+""+e.value.lower[1]),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.current[0],2)+""+e.value.current[1]),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(e.value.higher[0],2)+""+e.value.higher[1]))},sortMethod:function(e,t){return t-e},Footer:function(t){return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},C.formatNumber(12*e.getSumFooter(t,"monthlyprofit","current",0)/e.getSumFooter(t,"sizedays","size",0)*100,2)+"%"),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right"}},C.formatNumber(12*e.getMonthlyProfitSum()/e.getSumFooter(t,"sizedays","size",0)*100,2)+"%"))}},{Header:"Actions",accessor:"actions",minWidth:70,maxWidth:70,sortable:!1,filterable:!1}]}},{key:"hideConfirmDialog",value:function(){this.setState({isConfirmDialogShown:!1})}},{key:"removeTransaction",value:function(){this.props.removeTransaction(this.state.removedTransaction),this.hideConfirmDialog()}},{key:"hideChartDialog",value:function(){this.setState({isChartDialogShown:!1})}},{key:"render",value:function(){var e=this,t=r.a.createElement(he,{isDialogShown:this.props.isAddTradeDialogShown,hideDialog:this.props.hideAddTradeDialog,addTransaction:this.props.addTransaction,userModel:this.props.userModel,resModel:this.props.resModel}),n=r.a.createElement(fe,{isDialogShown:this.props.isEditTradeDialogShown,hideDialog:this.props.hideEditTradeDialog,editedTransaction:this.props.editedTransaction,updateTransaction:this.props.updateTransaction,userModel:this.props.userModel,resModel:this.props.resModel}),a=r.a.createElement(be,{isDialogShown:this.state.isConfirmDialogShown,hideDialog:this.hideConfirmDialog,removedTransaction:this.state.removedTransaction,removeTransaction:this.removeTransaction}),i=r.a.createElement(b.q,{id:"edit_tooltip"},"123 help");return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(D,{title:"What are my opened positions?",category:this.state.console,rightSection:r.a.createElement("span",null,r.a.createElement(M,{bsStyle:"info",fill:!0,special:!0,onClick:function(){return e.props.showAddTradeDialog()}},r.a.createElement("i",{className:"fa fa-plus"})," Add trade"),r.a.createElement(b.m,{placement:"bottom",overlay:i},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help"))),content:this.state.data?r.a.createElement(S.a,{className:"-highlight",data:this.state.data,filterable:!0,columns:this.getTableColumns(),defaultPageSize:10,noDataText:C.getNoDataText("trades",this.props.userModel)}):null}),this.props.isAddTradeDialogShown?t:"",this.props.isEditTradeDialogShown?n:"",this.state.isConfirmDialogShown?a:"")),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement($e,{selectedPosition:this.state.selectedPosition,userModel:this.props.userModel,resModel:this.props.resModel,addService:this.addService})))))}}]),t}(a.Component),at=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={title:"Update funding",buttonText:"Update",editedTransaction:e.editedTransaction,isDeposit:e.editedTransaction.isBuy,amount:e.editedTransaction.baseAmount.toString(),amountError:null,currency:n.getSelectObject(e.editedTransaction.pair.base),currencyError:null,currencies:e.editedTransaction.isBuy?n.getDepositCurrencies():n.getWithdrawalCurrencies(),date:e.editedTransaction.time,dateError:null,comment:e.editedTransaction.comment},console.log("Navigate to: "+window.location.pathname+"#/editFunding"),z.a.modalview(window.location.pathname+"#/editFunding"),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"getSelectObject",value:function(e){return{value:e,label:e.code}}},{key:"handleSaveButtonClick",value:function(){if(console.log("Validating input.."),this.isValidAmount(this.state.amount)&&this.isValidCurrency(this.state.currency)&&this.isValidDate(this.state.date)){console.log("All inputs valid. Saving funding..");var e=new F(this.state.currency.value,this.props.resModel.usd),t=new H(!1,this.state.isDeposit,e,parseFloat(this.state.amount),0,this.state.date,this.state.comment);this.props.updateTransaction(t),this.props.hideDialog()}}}]),t}(q);function rt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ot=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).hideConfirmDialog=n.hideConfirmDialog.bind(Object(p.a)(Object(p.a)(n))),n.removeTransaction=n.removeTransaction.bind(Object(p.a)(Object(p.a)(n))),n.state={data:n.mapTradesToState(e),isConfirmDialogShown:!1,removedTransaction:null},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){console.log("Navigate to: "+window.location.pathname+window.location.hash),z.a.pageview(window.location.pathname+window.location.hash)}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:this.mapTradesToState(e)})}},{key:"mapTradesToState",value:function(e){var t=this,n=[],a=e.userModel.transactions.slice(0,e.userModel.transactions.length);a.sort(function(e,t){return t.time.getTime()-e.time.getTime()});var i,o=rt(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(!s.isTrade){var l=s.time.toISOString().split("T")[0],u=s.pair.base.name,c=s.isBuy?"Deposit":"Withdrawal",m="null"===s.comment?"":s.comment,d=[s.baseAmount,s.pair.base.code];n.push([s,l,u,c,m,d])}}}catch(p){o.e(p)}finally{o.f()}return n.map(function(e,n){return{id:e[0],date:e[1],name:e[2],type:e[3],comment:e[4],volume:e[5],actions:r.a.createElement("div",{className:"actions-right"},r.a.createElement(M,{onClick:function(){return t.props.setEditedTransaction(t.state.data[n].id),t.props.showEditFundingDialog(),!0},bsStyle:"default",table:!0,simple:!0,icon:!0},r.a.createElement("i",{className:"fa fa-edit"}))," ",r.a.createElement(M,{onClick:function(){return t.setState({isConfirmDialogShown:!0,removedTransaction:t.state.data[n].id}),!0},bsStyle:"danger",table:!0,simple:!0,icon:!0},r.a.createElement("i",{className:"fa fa-times"}))," ")}})}},{key:"getTableColumns",value:function(){return[{Header:"Date",accessor:"date",minWidth:95,width:160,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())}},{Header:"Name",accessor:"name",minWidth:120,width:200,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())}},{Header:"Type",accessor:"type",minWidth:95,width:120,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())}},{Header:"Comment",accessor:"comment",minWidth:100,width:300,maxWidth:500,filterMethod:function(e,t){return-1!==t[e.id].toLowerCase().indexOf(e.value.toLowerCase())}},{Header:"Volume",accessor:"volume",minWidth:120,width:150,filterable:!1,Cell:function(e){return r.a.createElement("span",{style:{float:"right"}},C.formatNumber(e.value[0],2)+" "+e.value[1])},sortMethod:function(e,t){return t[0]-e[0]}},{Header:"Actions",accessor:"actions",minWidth:80,maxWidth:80,sortable:!1,filterable:!1}]}},{key:"hideConfirmDialog",value:function(){this.setState({isConfirmDialogShown:!1})}},{key:"removeTransaction",value:function(){this.props.removeTransaction(this.state.removedTransaction),this.hideConfirmDialog()}},{key:"getNoDataText",value:function(e,t){if(0===t.portfolios.slice(-1)[0].tradeCount)return 0===t.transactions.length?r.a.createElement("span",null,r.a.createElement("p",null,"Your portfolio is empty. To get started:"),r.a.createElement("ol",null,r.a.createElement("li",null,"click on the Add Funding button,"),r.a.createElement("li",null,"add your first deposit."))):r.a.createElement("span",null,"No ",e," found")}},{key:"render",value:function(){var e=this,t=this.props.userModel.portfolios.slice(-1)[0],n=this.props.userModel.transactions.length-t.tradeCount,a=r.a.createElement(G,{isDialogShown:this.props.isAddFundingDialogShown,hideDialog:this.props.hideAddFundingDialog,addTransaction:this.props.addTransaction,userModel:this.props.userModel,resModel:this.props.resModel}),i=r.a.createElement(at,{isDialogShown:this.props.isEditFundingDialogShown,hideDialog:this.props.hideEditFundingDialog,editedTransaction:this.props.editedTransaction,updateTransaction:this.props.updateTransaction,userModel:this.props.userModel,resModel:this.props.resModel}),o=r.a.createElement(be,{isDialogShown:this.state.isConfirmDialogShown,hideDialog:this.hideConfirmDialog,removedTransaction:this.state.removedTransaction,removeTransaction:this.removeTransaction}),s=r.a.createElement(b.q,{id:"edit_tooltip"},"Funding panel displays all your portfolio fundings: deposits and withdrawals. Deposit is when you add currency to your portfolio, and withdrawal is when you remove it. ",r.a.createElement("br",null),r.a.createElement("br",null),"To add a funding, click on the Add funding button. To edit or remove a funding, click on the edit/remove icon found in ACTIONS column.",r.a.createElement("br",null),r.a.createElement("br",null),"Fundings can be sorted, and filtered in multiple ways. For example, to show all USD withdrawals in 2018, enter United States Dollar in the NAME filter, and 2018 in the DATE filter.");return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(D,{title:"What are my recent deposits and withdrawals?",rightSection:r.a.createElement("div",null,r.a.createElement(M,{bsStyle:"info",fill:!0,special:!0,onClick:function(){return e.props.showAddFundingDialog()}},r.a.createElement("i",{className:"fa fa-plus"})," Add funding"),r.a.createElement(b.m,{placement:"bottom",overlay:s},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help"))),category:n+" funding"+(1===n?"":"s"),content:r.a.createElement(S.a,{className:"-highlight",data:this.state.data,filterable:!0,columns:this.getTableColumns(),defaultPageSize:10,noDataText:this.getNoDataText("deposits or withdrawals",this.props.userModel)})}),this.props.isAddFundingDialogShown?a:"",this.props.isEditFundingDialogShown?i:"",this.state.isConfirmDialogShown?o:""))))}}]),t}(a.Component);function st(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ut=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={chartOptions:n.getPieOptions(e)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({chartOptions:this.getPieOptions(e)})}},{key:"getPieOptions",value:function(e){var t,n=e.portfolio,a=[],r=st(n.balances.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value,o=n.getCurrencyBalance(e.resModel,i,e.resModel.usd);a.push({name:i.code,y:o})}}catch(s){r.e(s)}finally{r.f()}return{chart:{type:"pie"},title:{text:null},series:[{name:"Allocation",data:a}],tooltip:{shared:!0,valueSuffix:" USD",valueDecimals:2},credits:{enabled:!1}}}},{key:"render",value:function(){var e=this.props.portfolio.tradeCount;return r.a.createElement(D,{title:this.props.title,category:e+" trade"+(1===e?"":"s"),content:r.a.createElement(w.a,{highcharts:Xe.a,options:this.state.chartOptions})})}}]),t}(a.Component);function ct(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var dt=[{path:"/portfolio",name:"Portfolio",icon:"fa fa-pie-chart",component:ce},{path:"/trades",name:"Trades",icon:"fa fa-retweet",component:ve},{path:"/positions",name:"Positions",icon:"fa fa-piggy-bank",component:nt},{path:"/funding",name:"Funding",icon:"fa fa-money",component:ot},{path:"/performance",name:"Performance",icon:"fa fa-line-chart",component:function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).rangeClickHandler=n.rangeClickHandler.bind(Object(p.a)(Object(p.a)(n)));var a=e.userModel.getDaysSinceFirstTx(),r=n.getBestCurrentWorstPortfolio(e,a);return n.state={bestPortfolio:r.best,currentPortfolio:r.current,worstPortfolio:r.worst,performanceChartOptions:n.getPerformanceChartOptions(e,r.best,r.current,r.worst)},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){se.days=this.props.userModel.getDaysSinceFirstTx(),se.userFriendlyText="All time",console.log("Navigate to: "+window.location.pathname+window.location.hash),z.a.pageview(window.location.pathname+window.location.hash)}},{key:"componentWillReceiveProps",value:function(e){var t=e.userModel.getDaysSinceFirstTx(),n=this.getBestCurrentWorstPortfolio(e,t);this.setState({bestPortfolio:n.best,currentPortfolio:n.current,worstPortfolio:n.worst,performanceChartOptions:this.getPerformanceChartOptions(e,n.best,n.current,n.worst)})}},{key:"rangeClickHandler",value:function(){var e=this.getBestCurrentWorstPortfolio(this.props,se.days);this.setState({bestPortfolio:e.best,currentPortfolio:e.current,worstPortfolio:e.worst,performanceChartOptions:this.getPerformanceChartOptions(this.props,e.best,e.current,e.worst)})}},{key:"getBestCurrentWorstPortfolio",value:function(e,t){var n=new Date(2018,4,28);n.setHours(2,0,0,0),null!=e.resModel.dailyTickers.get(e.resModel.usd)&&null!=e.resModel.dailyTickers.get(e.resModel.usd).slice(-t)[0]&&(n=e.resModel.dailyTickers.get(e.resModel.usd).slice(-t)[0].time);var a,r=e.userModel.getPortfoliosSince(n),i=e.userModel.portfolios.slice(-1)[0],o=i,s=i,l=ct(r);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=u.getTotalBalance(e.resModel,e.resModel.usd);c>=o.getTotalBalance(e.resModel,e.resModel.usd)&&(o=u),c<=s.getTotalBalance(e.resModel,e.resModel.usd)&&(s=u)}}catch(m){l.e(m)}finally{l.f()}return{best:o,current:i,worst:s}}},{key:"getPortfolioSeries",value:function(e,t){var n=[];if(null!=e.resModel.dailyTickers.get(e.resModel.usd)){var a,r=ct(e.resModel.dailyTickers.get(e.resModel.usd));try{for(r.s();!(a=r.n()).done;){var i=a.value,o=t.getPastTotalBalance(e.resModel,i.time,e.resModel.usd);n.push([i.time.getTime(),o])}}catch(s){r.e(s)}finally{r.f()}null!=n.slice(-1)[0]&&(n.slice(-1)[0][1]=t.getTotalBalance(e.resModel,e.resModel.usd))}return n}},{key:"getPerformanceChartOptions",value:function(e,t,n,a){var r=[];r.push({name:"Best portfolio",data:this.getPortfolioSeries(e,t)}),r.push({name:"Current portfolio",data:this.getPortfolioSeries(e,n)}),r.push({name:"Worst portfolio",data:this.getPortfolioSeries(e,a)});for(var i=this.rangeClickHandler,o=function(e){se.buttons[e].events={click:function(){se.days=se.buttons[e].days,se.userFriendlyText=se.buttons[e].userFriendlyText,i.call()}}},s=0;s<se.buttons.length;s++)o(s);return{title:{text:null},rangeSelector:se,series:r,tooltip:{shared:!0,valueSuffix:" USD",valueDecimals:2},credits:{enabled:!1}}}},{key:"render",value:function(){var e=r.a.createElement(b.q,{id:"edit_tooltip"},"Performance panel displays a chart of best, worst and current portfolio in a selected time period. Click on a zoom buttons to select time period. ",r.a.createElement("br",null),r.a.createElement("br",null),"Chart is useful to evaluate your trading performance in selected time period. The closer your current is to the best portfolio, the better. ",r.a.createElement("br",null),r.a.createElement("br",null),"Current portfolio is portfolio with all your trades, portfolio you have right now. ",r.a.createElement("br",null),r.a.createElement("br",null),"Best/worst portfolio is portfolio with highest/lowest value in USD if you'd stopped trading altogether at some moment in selected time period.");return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:12},r.a.createElement(D,{title:"How does my current portfolio compare to past portfolios?",category:null!=se.userFriendlyText?se.userFriendlyText:"All time",rightSection:r.a.createElement(b.m,{placement:"bottom",overlay:e},r.a.createElement(M,{bsStyle:"default",special:!0,simple:!0},r.a.createElement("i",{className:"fa fa-question-circle"})," Help")),content:r.a.createElement(w.a,{highcharts:A.a,constructorType:"stockChart",options:this.state.performanceChartOptions})}))),r.a.createElement(b.n,null,r.a.createElement(b.b,{md:4},r.a.createElement(ut,{title:"Best portfolio",portfolio:this.state.bestPortfolio,resModel:this.props.resModel})),r.a.createElement(b.b,{md:4},r.a.createElement(ut,{title:"Current portfolio",portfolio:this.state.currentPortfolio,resModel:this.props.resModel})),r.a.createElement(b.b,{md:4},r.a.createElement(ut,{title:"Worst portfolio",portfolio:this.state.worstPortfolio,resModel:this.props.resModel})))))}}]),t}(a.Component)},{collapse:!0,path:"/manage",name:"Manage",state:"openManage",icon:"fa fa-folder",views:[{path:"/placeholder",name:"Placeholder",mini:"P",component:null}]},{redirect:!0,path:"/",pathTo:"/portfolio",name:"Portfolio"}],pt=n(405),ht=n(403),ft=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onInputRef=function(e){n.input=e},n.onClick=function(e){e.preventDefault(),n.input&&n.input.click()},n.onChange=function(e){n.props.onChange(e.target.files,e),e.target.value=null},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.accept,r=e.style,i=this.onInputRef,o=this.onClick,s=this.onChange;return a.createElement(a.Fragment,null,a.createElement("div",{onClick:o,onKeyPress:o,role:"button",tabIndex:"0",style:Object(pt.a)({display:"inline-block"},r)},t),a.createElement(ht.a,null,a.createElement("input",{ref:i,type:"file",accept:n,onChange:s,style:{display:"none"}})))}}]),t}(a.Component);ft.defaultProps={accept:"image/*"};var bt,yt=ft,gt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).onOpenClick=n.onOpenClick.bind(Object(p.a)(Object(p.a)(n))),n.state={isWindows:navigator.platform.indexOf("Win")>-1,width:window.innerWidth},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"activeRoute",value:function(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth})}},{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this)),navigator.platform.indexOf("Win")>-1&&(bt=new y.a(this.refs.sidebarWrapper,{suppressScrollX:!0,suppressScrollY:!1}))}},{key:"componentDidUpdate",value:function(){navigator.platform.indexOf("Win")>-1&&setTimeout(function(){bt.update()},350)}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&bt.destroy()}},{key:"onOpenClick",value:function(){return document.getElementById("input-files").click(),!1}},{key:"getChangeCount",value:function(){return this.props.changeCount>0?" ("+this.props.changeCount+")":""}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sidebar","data-color":"black","data-image":v.a},r.a.createElement("div",{className:"logo"},r.a.createElement("a",{href:"https://forkfol.io/app/",className:"simple-text logo-mini"},r.a.createElement("div",{className:"logo-img"},r.a.createElement("i",{className:"fa fa-book"}))),r.a.createElement("a",{href:"https://forkfol.io/app/",className:"simple-text logo-normal"},"ForkFolio")),r.a.createElement("div",{className:"sidebar-wrapper",ref:"sidebarWrapper"},r.a.createElement("ul",{className:"nav"},dt.map(function(t,n){var a={};return a[t.state]=!e.state[t.state],t.collapse?r.a.createElement("li",{className:e.activeRoute(t.path),key:n},r.a.createElement("a",{href:"/#",onClick:function(){return e.setState(a)}},r.a.createElement("i",{className:t.icon}),r.a.createElement("p",null,t.name+(e.state[t.state]?"":e.getChangeCount()),r.a.createElement("b",{className:e.state[t.state]?"caret rotate-180":"caret"}))),r.a.createElement(b.c,{in:e.state[t.state]},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"",key:5},r.a.createElement("a",{href:"/#",className:"nav-link",onClick:function(){return e.props.newPortfolio()}},r.a.createElement("i",{className:"fa fa-file-text-o"}),r.a.createElement("p",null,"New"))),r.a.createElement("li",{className:"",key:6},r.a.createElement("a",{href:"/#",className:"nav-link",onClick:function(){return e.onOpenClick()}},r.a.createElement("i",{className:"fa fa-folder-open"}),r.a.createElement("p",null,"Open"))),r.a.createElement("li",{className:"",key:7},r.a.createElement("a",{href:"/#",className:"nav-link",onClick:function(){return e.props.downloadPortfolio()}},r.a.createElement("i",{className:"fa fa-floppy-o"}),r.a.createElement("p",null,"Save",e.getChangeCount()))))),r.a.createElement(yt,{onChange:e.props.uploadPortfolioFromFile,accept:"application/json"},r.a.createElement("a",{href:"/#",id:"input-files"}))):t.redirect?null:r.a.createElement("li",{className:e.activeRoute(t.path),key:n},r.a.createElement(s.b,{to:t.path,className:"nav-link",activeClassName:"active"},r.a.createElement("i",{className:t.icon}),r.a.createElement("p",null,t.name)))}),r.a.createElement("li",{className:"",key:8},r.a.createElement("a",{className:"nav-link",href:"https://docs.google.com/forms/d/e/1FAIpQLSedlJMow1MmI3o6yBNAjtfXUQo05Pb6DVVSRg46PcM9yc8Bow/viewform",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fa fa-comments"}),r.a.createElement("p",null,"Feedback"))),r.a.createElement("li",{className:"",key:9},r.a.createElement("a",{href:"/#",className:"nav-link",onClick:function(){return e.props.showHelpPanel()}},r.a.createElement("i",{className:"fa fa-question-circle"}),r.a.createElement("p",null,"Help"))))))}}]),t}(a.Component),vt=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getTotalBalance",value:function(){return null!=this.props.userModel?this.props.userModel.portfolios.slice(-1)[0].getTotalBalance(this.props.resModel,this.props.resModel.usd):0}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.j,{pullRight:!0},r.a.createElement(b.k,{eventKey:3,href:"#/portfolio"},r.a.createElement("p",null,C.toShortFormat(this.getTotalBalance())))))}}]),t}(a.Component),Et=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleMinimizeSidebar=n.handleMinimizeSidebar.bind(Object(p.a)(Object(p.a)(n))),n.mobileSidebarToggle=n.mobileSidebarToggle.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"makeBrand",value:function(){var e,t=this;return dt.map(function(n,a){return n.collapse?n.views.map(function(n,a){return n.path===t.props.location.pathname&&(e=n.name),null}):(n.redirect,n.path===t.props.location.pathname&&(e=n.name)),null}),e}},{key:"handleMinimizeSidebar",value:function(){document.body.classList.toggle("sidebar-mini")}},{key:"mobileSidebarToggle",value:function(e){document.documentElement.classList.toggle("nav-open")}},{key:"updateWidth",value:function(){this.setState({width:window.innerWidth})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateWidth.bind(this))}},{key:"render",value:function(){return r.a.createElement(b.l,{fluid:!0},r.a.createElement("div",{className:"navbar-minimize"},r.a.createElement("button",{id:"minimizeSidebar",className:"btn btn-default btn-fill btn-round btn-icon",onClick:this.handleMinimizeSidebar},r.a.createElement("i",{className:"fa fa-ellipsis-v visible-on-sidebar-regular"}),r.a.createElement("i",{className:"fa fa-navicon visible-on-sidebar-mini"}))),r.a.createElement(b.l.Header,null,r.a.createElement(b.l.Brand,null,this.makeBrand()),r.a.createElement(b.l.Toggle,{onClick:this.mobileSidebarToggle})),window.innerWidth>992?r.a.createElement(vt,this.props):null)}}]),t}(a.Component),St=n(399),Tt=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"+(void 0!==this.props.transparent?" footer-transparent":"")},r.a.createElement("div",{className:"container"+(void 0!==this.props.fluid?"-fluid":"")},r.a.createElement("nav",{className:"pull-left"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://twitter.com/forkfol_io"},r.a.createElement("i",{className:"fa fa-twitter"})," Twitter")))),r.a.createElement("p",{className:"copyright pull-right"},"Copyright \xa9 ",1900+(new Date).getYear()," "," ForkFol.io ",St.version)))}}]),t}(a.Component),At=n(114),kt=n.n(At),wt=n(400),Dt=function e(t,n,a,r){Object(l.a)(this,e),this.pair=t,this.price=n,this.time=a,this.percentChange24h=r},Ct=n(401),xt=function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(l.a)(this,e),this.code=t,this.name=n,this.rank=a,this.isFiat=r,this.meta=null};var Bt="localhost:3000"===window.location.host?"https://forkfol.io/dummydata/":"https://rest.forkfol.io/rest/",Ot=(console.log("Is localhost: "+("localhost:3000"===window.location.host)),"localhost:3000"===window.location.host),Mt=n(402),Pt=n.n(Mt),Nt=n(249),jt=n.n(Nt),Ut=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main-content"},r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{md:6},r.a.createElement(b.i,{show:this.props.isDialogShown,onHide:function(){return e.props.hideDialog()}},r.a.createElement(b.i.Header,{closeButton:!0},r.a.createElement(b.i.Title,null,"Confirm new portfolio")),r.a.createElement(b.i.Body,null,r.a.createElement("p",null,"You have ",this.props.changeCount," unsaved change",this.props.changeCount>1?"s":""," in your current portfolio. If you create a new portfolio, all unsaved changes will be lost."),r.a.createElement("br",null),r.a.createElement("p",null,"Are you sure you want to create a new portfolio?")),r.a.createElement(b.i.Footer,null,r.a.createElement(M,{simple:!0,onClick:function(){return e.props.createNew()}},"Yes"),r.a.createElement(M,{simple:!0,onClick:function(){return e.props.hideDialog()}},"No"),r.a.createElement(M,{bsStyle:"default",fill:!0,wd:!0,type:"submit",onClick:function(){return e.props.saveCurrentAndCreateNew()}},"Save current and create new")))))))}}]),t}(a.Component),Ft=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D,{content:r.a.createElement(b.h,{fluid:!0},r.a.createElement(b.n,null,r.a.createElement(b.b,{lg:12,md:12},r.a.createElement("p",null,r.a.createElement("i",{class:"fa fa-info-circle","aria-hidden":"true"})," You're seeing a live demo, showcasing features on a sample portfolio. ",r.a.createElement("a",{href:"https://forkfol.io/app/"},"Click here to create your portfolio now ",r.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"}))))))}))}}]),t}(a.Component);function Ht(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var It=[{path:"/",name:"Home",component:function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleNotificationClick=n.handleNotificationClick.bind(Object(p.a)(Object(p.a)(n))),n.showHelpPanel=n.showHelpPanel.bind(Object(p.a)(Object(p.a)(n))),n.hideHelpPanel=n.hideHelpPanel.bind(Object(p.a)(Object(p.a)(n))),n.showAddTradeDialog=n.showAddTradeDialog.bind(Object(p.a)(Object(p.a)(n))),n.hideAddTradeDialog=n.hideAddTradeDialog.bind(Object(p.a)(Object(p.a)(n))),n.showAddFundingDialog=n.showAddFundingDialog.bind(Object(p.a)(Object(p.a)(n))),n.hideAddFundingDialog=n.hideAddFundingDialog.bind(Object(p.a)(Object(p.a)(n))),n.showEditTradeDialog=n.showEditTradeDialog.bind(Object(p.a)(Object(p.a)(n))),n.hideEditTradeDialog=n.hideEditTradeDialog.bind(Object(p.a)(Object(p.a)(n))),n.showEditFundingDialog=n.showEditFundingDialog.bind(Object(p.a)(Object(p.a)(n))),n.hideEditFundingDialog=n.hideEditFundingDialog.bind(Object(p.a)(Object(p.a)(n))),n.hideConfirmNewPortfolioDialog=n.hideConfirmNewPortfolioDialog.bind(Object(p.a)(Object(p.a)(n))),n.addTransaction=n.addTransaction.bind(Object(p.a)(Object(p.a)(n))),n.removeTransaction=n.removeTransaction.bind(Object(p.a)(Object(p.a)(n))),n.updateTransaction=n.updateTransaction.bind(Object(p.a)(Object(p.a)(n))),n.setEditedTransaction=n.setEditedTransaction.bind(Object(p.a)(Object(p.a)(n))),n.fetchRecentPrices=n.fetchRecentPrices.bind(Object(p.a)(Object(p.a)(n))),n.fetchCurrencies=n.fetchCurrencies.bind(Object(p.a)(Object(p.a)(n))),n.getCurrenciesToFetch=n.getCurrenciesToFetch.bind(Object(p.a)(Object(p.a)(n))),n.fetchAllAndRender=n.fetchAllAndRender.bind(Object(p.a)(Object(p.a)(n))),n.fetchHistoday=n.fetchHistoday.bind(Object(p.a)(Object(p.a)(n))),n.fetchMeta=n.fetchMeta.bind(Object(p.a)(Object(p.a)(n))),n.isDemo=n.isDemo.bind(Object(p.a)(Object(p.a)(n))),n.updateUserModel=n.updateUserModel.bind(Object(p.a)(Object(p.a)(n))),n.newPortfolio=n.newPortfolio.bind(Object(p.a)(Object(p.a)(n))),n.openPortfolio=n.openPortfolio.bind(Object(p.a)(Object(p.a)(n))),n.savePortfolio=n.savePortfolio.bind(Object(p.a)(Object(p.a)(n))),n.saveCurrentAndCreateNewPortfolio=n.saveCurrentAndCreateNewPortfolio.bind(Object(p.a)(Object(p.a)(n))),n.state={_notificationSystem:null,isHelpPanelShown:!1,isAddTradeDialogShown:!1,isAddFundingDialogShown:!1,isEditTradeDialogShown:!1,isEditFundingDialogShown:!1,isConfirmNewPortfolioDialogShown:!1,userModel:oe,resModel:ie,editedTransaction:null,changeCount:0},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"toTokensString",value:function(e){var t,n="",a=Ht(e);try{for(a.s();!(t=a.n()).done;){n+=t.value.code+","}}catch(r){a.e(r)}finally{a.f()}return n.slice(0,-1)}},{key:"isDemo",value:function(){return new kt.a(function(e,t){fetch("appversion.json").then(function(e){return e.json()}).then(function(t){e(t.isDemo)}).catch(function(e){t(e)})})}},{key:"fetchRecentPrices",value:function(){var e=this,t=this.getCurrenciesToFetch(this.state.userModel);t.length>0&&fetch(Bt+"recent?tokens="+this.toTokensString(t)).then(function(e){return e.text()}).then(function(t){for(var n=JSON.parse(t),a=0,r=0;r<n.length;r++){var i=parseFloat(n[r].l);if(i>.001&&(null==ie.recentTickers.get(n[r].c)||i!==ie.recentTickers.get(n[r].c).price)){var o=new F(n[r].c,ie.usd);ie.recentTickers.set(n[r].c,new Dt(o,i,new Date(1e3*parseInt(n[r].t,10)),n[r].p)),a++}}if(a>0){console.log("Recent prices updated ("+a+" tickers).");var s=new ne(e.state.userModel.transactions,e.state.userModel.positions,e.state.resModel);e.setState({userModel:s,resModel:e.state.resModel.clone()})}})}},{key:"fetchCurrencies",value:function(){return new kt.a(function(e,t){var n=Bt+(Ot?"currencies.json":"currencies");console.log("Fetching: "+n),fetch(n).then(function(e){return e.text()}).then(function(t){var n,a=Ht(JSON.parse(t));try{for(a.s();!(n=a.n()).done;){var r=n.value,i=new xt(r.c,r.n,r.r,r.f);ie.dailyTickers.set(i,[]),"USD"===i.code&&(ie.usd=i)}}catch(o){a.e(o)}finally{a.f()}e()})})}},{key:"getCurrenciesToFetch",value:function(e){var t,n=[],a=Ht(e.portfolios.slice(-1)[0].balances.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(r)}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"fetchAllAndRender",value:function(e,t){var n=this;this.fetchMeta().then(function(){var a,r=[],i=Ht(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.push(n.fetchHistoday(o,t))}}catch(s){i.e(s)}finally{i.f()}kt.a.all(r).then(function(){console.log("History prices updated ("+r.length+" series).");var e=n.state.resModel.clone(),t=new ne(n.state.userModel.transactions,n.state.userModel.positions,e);n.setState({userModel:t,resModel:e})})})}},{key:"fetchHistoday",value:function(e,t){return new kt.a(function(n,a){fetch(Bt+"histoday?range="+t+"&tokens="+e.code).then(function(e){return e.text()}).then(function(t){var a,r=[],i=Ht(JSON.parse(t));try{for(i.s();!(a=i.n()).done;){var o=a.value,s=new F(e,ie.usd);r.push(new Dt(s,o.l,new Date(1e3*parseInt(o.t,10))))}}catch(l){i.e(l)}finally{i.f()}ie.dailyTickers.set(e,r),n()})})}},{key:"fetchMeta",value:function(){var e=this;return new kt.a(function(t,n){var a=e.getCurrenciesToFetch(e.state.userModel);a.length>0&&fetch(Bt+"meta?tokens="+e.toTokensString(a)).then(function(e){return e.text()}).then(function(e){for(var n=JSON.parse(e),a=0;a<n.length;a++){ie.findCurrencyByCode(n[a].c).meta=JSON.parse(n[a].m)}t()})})}},{key:"componentDidMount",value:function(){this.setState({_notificationSystem:this.refs.notificationSystem})}},{key:"componentDidUpdate",value:function(e){"PUSH"===e.history.action&&(document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainPanel.scrollTop=0),window.innerWidth<993&&"PUSH"===e.history.action&&-1!==document.documentElement.className.indexOf("nav-open")&&document.documentElement.classList.toggle("nav-open")}},{key:"componentWillMount",value:function(){var e=this;this.fetchCurrencies().then(function(){e.isDemo().then(function(t){var n,a=!1;if(t)console.log("Loaded default portfolio."),n=e.updateUserModel(Ct,0);else{a=void 0===jt.a.load("showGettingStarted"),jt.a.save("showGettingStarted","1",{path:"/",maxAge:31536e3});var r=localStorage.getItem("portfolio01");if(null!=r&&""!==r){var i=JSON.parse(r);console.log("Loaded portfolio from local storage."),n=e.updateUserModel(i,i.changeCount)}else n=e.updateUserModel({},0)}if(e.setState({isHelpPanelShown:a,isDemo:t}),null!=n.transactions[0]){var o=n.getDaysSinceFirstTx();e.fetchAllAndRender(e.getCurrenciesToFetch(n),o+2)}e.fetchRecentPrices(),setInterval(e.fetchRecentPrices,6e4)})}),-1!==document.documentElement.className.indexOf("nav-open")&&document.documentElement.classList.toggle("nav-open")}},{key:"handleNotificationClick",value:function(e){var t;switch(Math.floor(4*Math.random()+1)){case 1:t="success";break;case 2:t="warning";break;case 3:t="error";break;case 4:t="info"}this.state._notificationSystem.addNotification({title:r.a.createElement("span",{"data-notify":"icon",className:"pe-7s-gift"}),message:r.a.createElement("div",null,"Notification text"),level:t,position:e,autoDismiss:15})}},{key:"showHelpPanel",value:function(){this.setState({isHelpPanelShown:!0})}},{key:"hideHelpPanel",value:function(){this.setState({isHelpPanelShown:!1})}},{key:"showAddTradeDialog",value:function(){this.setState({isAddTradeDialogShown:!0})}},{key:"hideAddTradeDialog",value:function(){this.setState({isAddTradeDialogShown:!1})}},{key:"showAddFundingDialog",value:function(){this.setState({isAddFundingDialogShown:!0})}},{key:"hideAddFundingDialog",value:function(){this.setState({isAddFundingDialogShown:!1})}},{key:"showEditTradeDialog",value:function(){this.setState({isEditTradeDialogShown:!0})}},{key:"hideEditTradeDialog",value:function(){this.setState({isEditTradeDialogShown:!1})}},{key:"showEditFundingDialog",value:function(){this.setState({isEditFundingDialogShown:!0})}},{key:"hideEditFundingDialog",value:function(){this.setState({isEditFundingDialogShown:!1})}},{key:"hideConfirmNewPortfolioDialog",value:function(){this.setState({isConfirmNewPortfolioDialogShown:!1})}},{key:"addTransaction",value:function(e){var t=!0,n=!0;if(null!=this.state.userModel.portfolios[1]){var a=new Date(this.state.userModel.portfolios[1].genesisTx.time);t=Z.getDaysSince(new Date(e.time))>Z.getDaysSince(a),n=!this.state.userModel.portfolios.slice(-1)[0].balances.has(e.pair.base)}this.state.userModel.transactions.push(e),this.state.userModel.transactions.sort(function(e,t){return e.time-t.time});var r=new ne(this.state.userModel.transactions,this.state.userModel.positions,this.state.resModel),i=this.state.changeCount+1;if(this.setState({userModel:r,changeCount:i}),this.state.isDemo||localStorage.setItem("portfolio01",this.getPortfolioJson(r,i)),n||t){var o=r.portfolios[1].genesisTx.time;this.fetchAllAndRender(this.getCurrenciesToFetch(r),Z.getDaysSince(o)+2)}console.log("Transaction added. "+r.transactions.length+" transactions in user model.")}},{key:"updateTransaction",value:function(e){var t=this,n=new Date(this.state.userModel.portfolios[1].genesisTx.time),a=Z.getDaysSince(new Date(e.time))>Z.getDaysSince(n),r=!this.state.userModel.portfolios.slice(-1)[0].balances.has(e.pair.base),i=this.state.userModel.transactions.filter(function(e){return e!==t.state.editedTransaction});i.push(e),i.sort(function(e,t){return e.time-t.time});var o=new ne(i,this.state.userModel.positions,this.state.resModel),s=this.state.changeCount+1;if(this.setState({userModel:o,changeCount:s}),this.state.isDemo||localStorage.setItem("portfolio01",this.getPortfolioJson(o,s)),r||a){var l=o.portfolios[1].genesisTx.time;this.fetchAllAndRender(this.getCurrenciesToFetch(o),Z.getDaysSince(l)+2)}console.log("Transaction added. "+o.transactions.length+" transactions in user model.")}},{key:"removeTransaction",value:function(e){var t=new Date(this.state.userModel.portfolios[1].genesisTx.time),n=Z.getDaysSince(new Date(e.time))>=Z.getDaysSince(t),a=!this.state.userModel.portfolios.slice(-1)[0].balances.has(e.pair.base),r=this.state.userModel.transactions.filter(function(t){return t!==e});r.sort(function(e,t){return e.time-t.time});var i=new ne(r,this.state.userModel.positions,this.state.resModel),o=this.state.changeCount+1;if(this.setState({userModel:i,changeCount:o}),this.state.isDemo||localStorage.setItem("portfolio01",this.getPortfolioJson(i,o)),a||n){var s=i.portfolios[1].genesisTx.time;this.fetchAllAndRender(this.getCurrenciesToFetch(i),Z.getDaysSince(s)+2)}console.log("Transaction removed. "+i.transactions.length+" transactions in user model.")}},{key:"setEditedTransaction",value:function(e){this.setState({editedTransaction:e})}},{key:"newPortfolio",value:function(){this.state.changeCount>0&&!this.state.isConfirmNewPortfolioDialogShown?this.setState({isConfirmNewPortfolioDialogShown:!0}):(console.log("New portfolio created"),this.updateUserModel({},0),this.state.isDemo||localStorage.setItem("portfolio01",""),this.setState({isConfirmNewPortfolioDialogShown:!1}),z.a.event({category:"User",action:"New"}))}},{key:"saveCurrentAndCreateNewPortfolio",value:function(){this.savePortfolio(),this.newPortfolio()}},{key:"updateUserModel",value:function(e,t){var n=[],a=[];e.transactions&&(n=this.stringifiedToObjectsTransactions(e.transactions)),e.positions&&(a=e.positions);var r=new ne(n,a,this.state.resModel);return this.setState({userModel:r,changeCount:t}),r}},{key:"openPortfolio",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",function(){t.state.isDemo||localStorage.setItem("portfolio01",n.result);var e=JSON.parse(n.result),a=t.updateUserModel(e,0),r=a.portfolios[1].genesisTx.time;t.fetchAllAndRender(t.getCurrenciesToFetch(a),Z.getDaysSince(r)+2),z.a.event({category:"User",action:"Open"})},!1),e.length>0&&n.readAsText(e[0])}},{key:"savePortfolio",value:function(){var e=this.getPortfolioJson(this.state.userModel,0);this.state.isDemo||localStorage.setItem("portfolio01",e);var t=new File([e],"my-forkfolio-"+this.state.userModel.transactions.length+".json",{type:"text/plain;charset=utf-8"});Pt.a.saveAs(t),this.setState({changeCount:0}),z.a.event({category:"User",action:"Save"})}},{key:"getPortfolioJson",value:function(e,t){var n,a=[],r=Ht(e.transactions);try{for(r.s();!(n=r.n()).done;){var i=n.value,o={isTrade:i.isTrade,isBuy:i.isBuy,pair:i.pair.base.code+"/"+i.pair.counter.code,baseAmount:i.baseAmount,counterAmount:i.counterAmount,time:i.time.getTime(),comment:i.comment};a.push(o)}}catch(l){r.e(l)}finally{r.f()}var s={version:1,credit:"This json file is created by ForkFolio App at https://forkfol.io",transactions:a,changeCount:t};return JSON.stringify(s,null,"\t")}},{key:"stringifiedToObjectsTransactions",value:function(e){var t,n=[],a=Ht(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.pair.split("/"),o=ie.findCurrencyByCode(i[0]),s=ie.findCurrencyByCode(i[1]);if(null!==o&&null!==s){var l=new F(o,s),u=new H(r.isTrade,r.isBuy,l,r.baseAmount,r.counterAmount,new Date(r.time),r.comment);n.push(u)}}}catch(c){a.e(c)}finally{a.f()}return n}},{key:"render",value:function(){var e=this,t=r.a.createElement(Ut,{isDialogShown:this.state.isConfirmNewPortfolioDialogShown,hideDialog:this.hideConfirmNewPortfolioDialog,createNew:this.newPortfolio,saveCurrentAndCreateNew:this.saveCurrentAndCreateNewPortfolio,changeCount:this.state.changeCount});return r.a.createElement("div",{className:"wrapper"},r.a.createElement(f.a,{ref:"notificationSystem",style:wt.style}),r.a.createElement(gt,Object.assign({},this.props,{newPortfolio:this.newPortfolio,uploadPortfolioFromFile:this.openPortfolio,downloadPortfolio:this.savePortfolio,showHelpPanel:this.showHelpPanel,userModel:this.state.userModel,resModel:this.state.resModel,changeCount:this.state.changeCount})),r.a.createElement("div",{className:"main-panel"+("/maps/full-screen-maps"===this.props.location.pathname?" main-panel-maps":""),ref:"mainPanel"},r.a.createElement(Et,{location:this.props.location,userModel:this.state.userModel,resModel:this.state.resModel}),this.state.isDemo?r.a.createElement("div",{className:"demo-content"},r.a.createElement(Ft,null)):"",r.a.createElement(s.e,null,dt.map(function(t,n){return t.collapse?t.views.map(function(t,n){return"Notifications"===t.name?r.a.createElement(s.d,{path:t.path,key:n,render:function(n){return r.a.createElement(t.component,Object.assign({},n,{handleClick:e.handleNotificationClick}))}}):r.a.createElement(s.d,{path:t.path,component:t.component,key:n})}):t.redirect?r.a.createElement(s.c,{from:t.path,to:t.pathTo,key:n}):r.a.createElement(s.d,{path:t.path,key:n,render:function(n){return r.a.createElement(t.component,Object.assign({},n,{handleClick:e.handleNotificationClick,userModel:e.state.userModel,resModel:e.state.resModel,isHelpPanelShown:e.state.isHelpPanelShown,hideHelpPanel:e.hideHelpPanel,isAddTradeDialogShown:e.state.isAddTradeDialogShown,showAddTradeDialog:e.showAddTradeDialog,hideAddTradeDialog:e.hideAddTradeDialog,isAddFundingDialogShown:e.state.isAddFundingDialogShown,showAddFundingDialog:e.showAddFundingDialog,hideAddFundingDialog:e.hideAddFundingDialog,isEditTradeDialogShown:e.state.isEditTradeDialogShown,showEditTradeDialog:e.showEditTradeDialog,hideEditTradeDialog:e.hideEditTradeDialog,isEditFundingDialogShown:e.state.isEditFundingDialogShown,showEditFundingDialog:e.showEditFundingDialog,hideEditFundingDialog:e.hideEditFundingDialog,addTransaction:e.addTransaction,removeTransaction:e.removeTransaction,updateTransaction:e.updateTransaction,setEditedTransaction:e.setEditedTransaction,editedTransaction:e.state.editedTransaction}))}})})),r.a.createElement(Tt,{fluid:!0}),this.state.isConfirmNewPortfolioDialogShown?t:""))}}]),t}(a.Component)}];n(975),n(976),n(977),n(978);z.a.initialize("UA-112760038-1"),o.a.render(r.a.createElement(s.a,null,r.a.createElement(s.e,null,It.map(function(e,t){return r.a.createElement(s.d,{path:e.path,key:t,render:function(t){return r.a.createElement(e.component,t)}})}))),document.getElementById("root"))}},[[409,1,2]]]);
//# sourceMappingURL=main.09c2c6f9.chunk.js.map